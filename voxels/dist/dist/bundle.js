!function(r){var e={};function t(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return r[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=r,t.c=e,t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:n})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(1&e&&(r=t(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var a in r)t.d(n,a,function(e){return r[e]}.bind(null,a));return n},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s="./src/main.ts")}({"./node_modules/fs/index.js":function(r,e){console.log("I'm `fs` modules")},"./node_modules/twgl.js/dist/3.x/twgl-full.js":function(r,e,t){
/*!
 * @license twgl.js 3.6.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
!function(e,t){r.exports=t()}(0,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var a=e[n]={exports:{},id:n,loaded:!1};return r[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}return t.m=r,t.c=e,t.p="",t(0)}([function(r,e,t){var n,a;n=[t(1),t(10),t(11),t(12)],void 0===(a=function(r,e,t,n){"use strict";return r.m4=e,r.v3=t,r.primitives=n,r}.apply(e,n))||(r.exports=a)},function(r,e,t){var n,a;n=[t(2),t(5),t(7),t(6),t(8),t(3),t(9),t(4)],void 0===(a=function(r,e,t,n,a,o,i,u){"use strict";var s={addExtensionsToContext:!0};var f=/^(.*?)_/;function c(r,e){var t=r.getExtension(e);if(t){var n=f.exec(e)[1],a="_"+n;for(var o in t){var i=t[o],u="function"==typeof i,s=u?n:a,c=o;o.endsWith(s)&&(c=o.substring(0,o.length-s.length)),void 0!==r[c]?u||r[c]===i||console.warn(c,r[c],i,o):r[c]=u?function(r){return function(){return r.apply(t,arguments)}}(i):i}}return t}var l=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","WEBGL_draw_buffers"];function b(r){for(var e=0;e<l.length;++e)c(r,l[e])}var p={addExtensionsToContext:b,getContext:function(r,e){return function(r,e){for(var t=["webgl2","webgl","experimental-webgl"],n=null,a=0;a<t.length;++a)if(n=r.getContext(t[a],e)){s.addExtensionsToContext&&b(n);break}return n}(r,e)},getWebGLContext:function(r,e){return function(r,e){for(var t=["webgl","experimental-webgl"],n=null,a=0;a<t.length;++a)if(n=r.getContext(t[a],e)){s.addExtensionsToContext&&b(n);break}return n}(r,e)},isWebGL1:u.isWebGL1,isWebGL2:u.isWebGL2,resizeCanvasToDisplaySize:function(r,e){e=e||1,e=Math.max(1,e);var t=r.getBoundingClientRect(),n=Math.round(t.width*e),a=Math.round(t.height*e);return(r.width!==n||r.height!==a)&&(r.width=n,r.height=a,!0)},setDefaults:function(e){u.copyExistingProperties(e,s),r.setDefaults_(e),a.setDefaults_(e)}};function y(r){return"_"!==r[r.length-1]}function m(r,e){return Object.keys(r).filter(y).forEach(function(t){e[t]=r[t]}),e}var d={attributes:r,draw:e,framebuffers:t,programs:n,textures:a,typedArrays:o,vertexArrays:i};return Object.keys(d).forEach(function(r){var e=d[r];m(e,p),p[r]=m(e,{})}),p}.apply(e,n))||(r.exports=a)},function(r,e,t){var n,a;n=[t(3),t(4)],void 0===(a=function(r,e){"use strict";var t={attribPrefix:""};function n(r,e,t,n,a){r.bindBuffer(e,t),r.bufferData(e,n,a||r.STATIC_DRAW)}function a(r,e,t,a){if(e instanceof WebGLBuffer)return e;t=t||r.ARRAY_BUFFER;var o=r.createBuffer();return n(r,t,o,e,a),o}function o(r){return"indices"===r}function i(r){return r.length?r:r.data}var u=/coord|texture/i,s=/color|colour/i;function f(r,e){var t;if(e%(t=u.test(r)?2:s.test(r)?4:3)>0)throw"Can not guess numComponents for attribute '"+r+"'. Tried "+t+" but "+e+" values is not evenly divisible by "+t+". You should specify it.";return t}function c(r,e){return r.numComponents||r.size||f(e,i(r).length)}function l(e,t){if(r.isArrayBuffer(e))return e;if(r.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var n=e.type;return n||(n=o(t)?Uint16Array:Float32Array),new n(e.data)}function b(e,n){var i={};return Object.keys(n).forEach(function(u){if(!o(u)){var s,b,p,y,m,d=n[u],v=d.attrib||d.name||d.attribName||t.attribPrefix+u;if("number"==typeof d||"number"==typeof d.data){m=d.data||d;var g=d.type||Float32Array,h=m*g.BYTES_PER_ELEMENT;b=r.getGLTypeForTypedArrayType(g),p=void 0!==d.normalize?d.normalize:function(r){return r===Int8Array||r===Uint8Array}(g),y=d.numComponents||d.size||f(u,m),s=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,h,d.drawType||e.STATIC_DRAW)}else{var E=l(d,u);s=a(e,E,void 0,d.drawType),b=r.getGLTypeForTypedArray(E),p=void 0!==d.normalize?d.normalize:function(r){return r instanceof Int8Array||r instanceof Uint8Array}(E),y=c(d,u),m=E.length}i[v]={buffer:s,numComponents:y,type:b,normalize:p,stride:d.stride||0,offset:d.offset||0,divisor:void 0===d.divisor?void 0:d.divisor,drawType:d.drawType}}}),e.bindBuffer(e.ARRAY_BUFFER,null),i}var p=["position","positions","a_position"];function y(r,e,t){var n="indices"===t?r.ELEMENT_ARRAY_BUFFER:r.ARRAY_BUFFER;return a(r,l(e,t),n)}return{createAttribsFromArrays:b,createBuffersFromArrays:function(e,t){var n={};return Object.keys(t).forEach(function(r){n[r]=y(e,t[r],r)}),t.indices?(n.numElements=t.indices.length,n.elementType=r.getGLTypeForTypedArray(l(t.indices),"indices")):n.numElements=function(r){for(var e,t=0;t<p.length&&!((e=p[t])in r);++t);t===p.length&&(e=Object.keys(r)[0]);var n=r[e],a=i(n).length,o=c(n,e),u=a/o;if(a%o>0)throw"numComponents "+o+" not correct for length "+a;return u}(t),n},createBufferFromArray:y,createBufferFromTypedArray:a,createBufferInfoFromArrays:function(e,n){var o={attribs:b(e,n)},i=n.indices;return i?(i=l(i,"indices"),o.indices=a(e,i,e.ELEMENT_ARRAY_BUFFER),o.numElements=i.length,o.elementType=r.getGLTypeForTypedArray(i)):o.numElements=function(r,e){for(var n,a=0;a<p.length&&!((n=p[a])in e)&&!((n=t.attribPrefix+n)in e);++a);a===p.length&&(n=Object.keys(e)[0]);var o=e[n];r.bindBuffer(r.ARRAY_BUFFER,o.buffer);var i=r.getBufferParameter(r.ARRAY_BUFFER,r.BUFFER_SIZE);r.bindBuffer(r.ARRAY_BUFFER,null);var u=i/function(r,e){return e===r.BYTE?1:e===r.UNSIGNED_BYTE?1:e===r.SHORT?2:e===r.UNSIGNED_SHORT?2:e===r.INT?4:e===r.UNSIGNED_INT?4:e===r.FLOAT?4:0}(r,o.type),s=o.numComponents||o.size,f=u/s;if(f%1!=0)throw"numComponents "+s+" not correct for length "+length;return f}(e,o.attribs),o},setAttribInfoBufferFromArray:function(r,e,t,a){t=l(t),void 0!==a?(r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.bufferSubData(r.ARRAY_BUFFER,a,t)):n(r,r.ARRAY_BUFFER,e.buffer,t,e.drawType)},setAttributePrefix:function(r){t.attribPrefix=r},setDefaults_:function(r){e.copyExistingProperties(r,t)},getNumComponents_:c,getArray_:i}}.apply(e,n))||(r.exports=a)},function(r,e,t){var n;void 0===(n=function(){"use strict";var r=5120,e=5121,t=5122,n=5123,a=5124,o=5125,i=5126,u={},s=u;return s[r]=Int8Array,s[e]=Uint8Array,s[t]=Int16Array,s[n]=Uint16Array,s[a]=Int32Array,s[o]=Uint32Array,s[i]=Float32Array,s[32819]=Uint16Array,s[32820]=Uint16Array,s[33635]=Uint16Array,s[5131]=Uint16Array,s[33640]=Uint32Array,s[35899]=Uint32Array,s[35902]=Uint32Array,s[36269]=Uint32Array,s[34042]=Uint32Array,{getGLTypeForTypedArray:function(u){if(u instanceof Int8Array)return r;if(u instanceof Uint8Array)return e;if(u instanceof Uint8ClampedArray)return e;if(u instanceof Int16Array)return t;if(u instanceof Uint16Array)return n;if(u instanceof Int32Array)return a;if(u instanceof Uint32Array)return o;if(u instanceof Float32Array)return i;throw"unsupported typed array type"},getGLTypeForTypedArrayType:function(u){if(u===Int8Array)return r;if(u===Uint8Array)return e;if(u===Uint8ClampedArray)return e;if(u===Int16Array)return t;if(u===Uint16Array)return n;if(u===Int32Array)return a;if(u===Uint32Array)return o;if(u===Float32Array)return i;throw"unsupported typed array type"},getTypedArrayTypeForGLType:function(r){var e=u[r];if(!e)throw"unknown gl type";return e},isArrayBuffer:function(r){return r&&r.buffer&&r.buffer instanceof ArrayBuffer}}}.apply(e,[]))||(r.exports=n)},function(r,e,t){var n;void 0===(n=function(){"use strict";return{copyExistingProperties:function(r,e){Object.keys(e).forEach(function(t){e.hasOwnProperty(t)&&r.hasOwnProperty(t)&&(e[t]=r[t])})},copyNamedProperties:function(r,e,t){r.forEach(function(r){var n=e[r];void 0!==n&&(t[r]=n)})},shallowCopy:function(r){var e={};return Object.keys(r).forEach(function(t){e[t]=r[t]}),e},isWebGL1:function(r){return!r.texStorage2D},isWebGL2:function(r){return!!r.texStorage2D},error:window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},warn:window.console&&window.console.warn&&"function"==typeof window.console.warn?window.console.warn.bind(window.console):function(){}}}.apply(e,[]))||(r.exports=n)},function(r,e,t){var n,a;n=[t(6)],void 0===(a=function(r){"use strict";function e(r,e,t,n,a){t=void 0===t?r.TRIANGLES:t;var o=e.indices,i=e.elementType,u=void 0===n?e.numElements:n;a=void 0===a?0:a,i||o?r.drawElements(t,u,void 0===i?r.UNSIGNED_SHORT:e.elementType,a):r.drawArrays(t,a,u)}return{drawBufferInfo:e,drawObjectList:function(t,n){var a=null,o=null;n.forEach(function(n){if(!1!==n.active){var i=n.programInfo,u=n.vertexArrayInfo||n.bufferInfo,s=!1,f=void 0===n.type?t.TRIANGLES:n.type;i!==a&&(a=i,t.useProgram(i.program),s=!0),(s||u!==o)&&(o&&o.vertexArrayObject&&!u.vertexArrayObject&&t.bindVertexArray(null),o=u,r.setBuffersAndAttributes(t,i,u)),r.setUniforms(i,n.uniforms),e(t,u,f,n.count,n.offset)}}),o.vertexArrayObject&&t.bindVertexArray(null)}}}.apply(e,n))||(r.exports=a)},function(r,e,t){var n,a;n=[t(4)],void 0===(a=function(r){"use strict";var e=r.error,t=r.warn,n={};function a(r,e){return n[e].bindPoint}function o(r,e){return function(t){r.uniform1i(e,t)}}function i(r,e){return function(t){r.uniform1iv(e,t)}}function u(r,e){return function(t){r.uniform2iv(e,t)}}function s(r,e){return function(t){r.uniform3iv(e,t)}}function f(r,e){return function(t){r.uniform4iv(e,t)}}function c(e,t,n,o){var i=a(0,t);return r.isWebGL2(e)?function(r){var t=void 0,a=void 0;r instanceof WebGLTexture?(t=r,a=null):(t=r.texture,a=r.sampler),e.uniform1i(o,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(i,t),e.bindSampler(n,a)}:function(r){e.uniform1i(o,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(i,r)}}function l(e,t,n,o,i){for(var u=a(0,t),s=new Int32Array(i),f=0;f<i;++f)s[f]=n+f;return r.isWebGL2(e)?function(r){e.uniform1iv(o,s),r.forEach(function(r,t){e.activeTexture(e.TEXTURE0+s[t]);var a=void 0,o=void 0;r instanceof WebGLTexture?(a=r,o=null):(a=r.texture,o=r.sampler),e.bindSampler(n,o),e.bindTexture(u,a)})}:function(r){e.uniform1iv(o,s),r.forEach(function(r,t){e.activeTexture(e.TEXTURE0+s[t]),e.bindTexture(u,r)})}}function b(r,e){return function(t){r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.enableVertexAttribArray(e),r.vertexAttribPointer(e,t.numComponents||t.size,t.type||r.FLOAT,t.normalize||!1,t.stride||0,t.offset||0),void 0!==t.divisor&&r.vertexAttribDivisor(e,t.divisor)}}function p(r,e){return function(t){r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.enableVertexAttribArray(e),r.vertexAttribIPointer(e,t.numComponents||t.size,t.type||r.INT,t.stride||0,t.offset||0),void 0!==t.divisor&&r.vertexAttribDivisor(e,t.divisor)}}function y(r,e,t){var a=t.size,o=t.count;return function(t){r.bindBuffer(r.ARRAY_BUFFER,t.buffer);for(var i=t.size||t.numComponents||a,u=i/o,s=t.type||r.FLOAT,f=n[s].size*i,c=t.normalize||!1,l=t.offset||0,b=f/o,p=0;p<o;++p)r.enableVertexAttribArray(e+p),r.vertexAttribPointer(e+p,u,s,c,f,l+b*p),void 0!==t.divisor&&r.vertexAttribDivisor(e+p,t.divisor)}}n[5126]={Type:Float32Array,size:4,setter:function(r,e){return function(t){r.uniform1f(e,t)}},arraySetter:function(r,e){return function(t){r.uniform1fv(e,t)}}},n[35664]={Type:Float32Array,size:8,setter:function(r,e){return function(t){r.uniform2fv(e,t)}}},n[35665]={Type:Float32Array,size:12,setter:function(r,e){return function(t){r.uniform3fv(e,t)}}},n[35666]={Type:Float32Array,size:16,setter:function(r,e){return function(t){r.uniform4fv(e,t)}}},n[5124]={Type:Int32Array,size:4,setter:o,arraySetter:i},n[35667]={Type:Int32Array,size:8,setter:u},n[35668]={Type:Int32Array,size:12,setter:s},n[35669]={Type:Int32Array,size:16,setter:f},n[5125]={Type:Uint32Array,size:4,setter:function(r,e){return function(t){r.uniform1ui(e,t)}},arraySetter:function(r,e){return function(t){r.uniform1uiv(e,t)}}},n[36294]={Type:Uint32Array,size:8,setter:function(r,e){return function(t){r.uniform2uiv(e,t)}}},n[36295]={Type:Uint32Array,size:12,setter:function(r,e){return function(t){r.uniform3uiv(e,t)}}},n[36296]={Type:Uint32Array,size:16,setter:function(r,e){return function(t){r.uniform4uiv(e,t)}}},n[35670]={Type:Uint32Array,size:4,setter:o,arraySetter:i},n[35671]={Type:Uint32Array,size:8,setter:u},n[35672]={Type:Uint32Array,size:12,setter:s},n[35673]={Type:Uint32Array,size:16,setter:f},n[35674]={Type:Float32Array,size:16,setter:function(r,e){return function(t){r.uniformMatrix2fv(e,!1,t)}}},n[35675]={Type:Float32Array,size:36,setter:function(r,e){return function(t){r.uniformMatrix3fv(e,!1,t)}}},n[35676]={Type:Float32Array,size:64,setter:function(r,e){return function(t){r.uniformMatrix4fv(e,!1,t)}}},n[35685]={Type:Float32Array,size:24,setter:function(r,e){return function(t){r.uniformMatrix2x3fv(e,!1,t)}}},n[35686]={Type:Float32Array,size:32,setter:function(r,e){return function(t){r.uniformMatrix2x4fv(e,!1,t)}}},n[35687]={Type:Float32Array,size:24,setter:function(r,e){return function(t){r.uniformMatrix3x2fv(e,!1,t)}}},n[35688]={Type:Float32Array,size:48,setter:function(r,e){return function(t){r.uniformMatrix3x4fv(e,!1,t)}}},n[35689]={Type:Float32Array,size:32,setter:function(r,e){return function(t){r.uniformMatrix4x2fv(e,!1,t)}}},n[35690]={Type:Float32Array,size:48,setter:function(r,e){return function(t){r.uniformMatrix4x3fv(e,!1,t)}}},n[35678]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:3553},n[35680]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:34067},n[35679]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:32879},n[35682]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:3553},n[36289]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:35866},n[36292]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:35866},n[36293]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:34067},n[36298]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:3553},n[36299]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:32879},n[36300]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:34067},n[36303]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:35866},n[36306]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:3553},n[36307]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:32879},n[36308]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:34067},n[36311]={Type:null,size:0,setter:c,arraySetter:l,bindPoint:35866};var m={};m[5126]={size:4,setter:b},m[35664]={size:8,setter:b},m[35665]={size:12,setter:b},m[35666]={size:16,setter:b},m[5124]={size:4,setter:p},m[35667]={size:8,setter:p},m[35668]={size:12,setter:p},m[35669]={size:16,setter:p},m[5125]={size:4,setter:p},m[36294]={size:8,setter:p},m[36295]={size:12,setter:p},m[36296]={size:16,setter:p},m[35670]={size:4,setter:p},m[35671]={size:8,setter:p},m[35672]={size:12,setter:p},m[35673]={size:16,setter:p},m[35674]={size:4,setter:y,count:2},m[35675]={size:9,setter:y,count:3},m[35676]={size:16,setter:y,count:4};var d=void 0;var v=/^[ \t]*\n/;function g(r,t,n,a){var o=a||e,i=r.createShader(n),u=0;if(v.test(t)&&(u=1,t=t.replace(v,"")),r.shaderSource(i,t),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS)){var s=r.getShaderInfoLog(i);return o(function(r,e){return e=e||0,++e,r.split("\n").map(function(r,t){return t+e+": "+r}).join("\n")}(t,u)+"\n*** Error compiling shader: "+s),r.deleteShader(i),null}return i}function h(r,t,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r)n=r,r=void 0;else if(r&&!Array.isArray(r)){if(r.errorCallback)return r;var a=r;n=a.errorCallback,r=a.attribLocations;var o=a.transformFeedbackVaryings}var i={errorCallback:n||e,transformFeedbackVaryings:o};if(r){var u={};Array.isArray(r)?r.forEach(function(r,e){u[r]=t?t[e]:e}):u=r,i.attribLocations=u}return i}var E=["VERTEX_SHADER","FRAGMENT_SHADER"];function x(r){return r.indexOf("frag")>=0?d.FRAGMENT_SHADER:r.indexOf("vert")>=0?d.VERTEX_SHADER:void 0}function A(r,e){e.forEach(function(e){r.deleteShader(e)})}function T(r,e,t,n,a){for(var o=h(t,n,a),i=[],u=[],s=0;s<e.length;++s){var f=e[s];if("string"==typeof f){var c=document.getElementById(f),l=c?c.text:f,b=r[E[s]];c&&c.type&&(b=x(c.type)||b),f=g(r,l,b,o.errorCallback),u.push(f)}f instanceof WebGLShader&&i.push(f)}if(i.length!==e.length)return programOptions.errorCallback("not enough shaders for program"),A(r,u),null;var p=r.createProgram();i.forEach(function(e){r.attachShader(p,e)}),o.attribLocations&&Object.keys(o.attribLocations).forEach(function(e){r.bindAttribLocation(p,o.attribLocations[e],e)});var y=o.transformFeedbackVaryings;if(y&&(y.attribs&&(y=y.attribs),Array.isArray(y)||(y=Object.keys(y)),r.transformFeedbackVaryings(p,y,o.transformFeedbackMode||r.SEPARATE_ATTRIBS)),r.linkProgram(p),!r.getProgramParameter(p,r.LINK_STATUS)){var m=r.getProgramInfoLog(p);return o.errorCallback("Error in program linking:"+m),r.deleteProgram(p),A(r,u),null}return p}function w(r,e,t,n){var a,o=document.getElementById(e);if(!o)throw"*** Error: unknown script element"+e;a=o.text;var i=t||x(o.type);if(!i)throw"*** Error: unknown shader type";return g(r,a,i,n)}function _(r,e,t,n,a){for(var o=h(t,n,a),i=[],u=0;u<e.length;++u){var s=g(r,e[u],r[E[u]],o.errorCallback);if(!s)return null;i.push(s)}return T(r,i,o)}function F(r,e){var t=0;function a(e,a){var o,i=r.getUniformLocation(e,a.name),u=a.size>1&&"[0]"===a.name.substr(-3),s=a.type,f=n[s];if(!f)throw"unknown type: 0x"+s.toString(16);if(f.bindPoint){var c=t;t+=a.size,o=u?f.arraySetter(r,s,c,i,a.size):f.setter(r,s,c,i,a.size)}else o=f.arraySetter&&u?f.arraySetter(r,i):f.setter(r,i);return o.location=i,o}for(var o={},i=r.getProgramParameter(e,r.ACTIVE_UNIFORMS),u=0;u<i;++u){var s=r.getActiveUniform(e,u);if(!s)break;var f=s.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var c=a(e,s);o[f]=c}return o}function R(r,e){for(var t={},n=r.getProgramParameter(e,r.TRANSFORM_FEEDBACK_VARYINGS),a=0;a<n;++a){var o=r.getTransformFeedbackVarying(e,a);t[o.name]={index:a,type:o.type,size:o.size}}return t}function P(r,e,t){for(var n in e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),t.attribs&&(t=t.attribs),t){var a=e[n];if(a){var o=t[n];o.offset?r.bindBufferRange(r.TRANSFORM_FEEDBACK_BUFFER,a.index,o.buffer,o.offset,o.size):r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,a.index,o.buffer)}}}function B(r,e){for(var t=r.getProgramParameter(e,r.ACTIVE_UNIFORMS),n=[],a=[],o=0;o<t;++o){a.push(o),n.push({});var i=r.getActiveUniform(e,o);if(!i)break;n[o].name=i.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(t){var o=t[0],i=t[1];r.getActiveUniforms(e,a,r[o]).forEach(function(r,e){n[e][i]=r})});var u={},s=r.getProgramParameter(e,r.ACTIVE_UNIFORM_BLOCKS);for(o=0;o<s;++o){var f=r.getActiveUniformBlockName(e,o),c={index:o,usedByVertexShader:r.getActiveUniformBlockParameter(e,o,r.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:r.getActiveUniformBlockParameter(e,o,r.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:r.getActiveUniformBlockParameter(e,o,r.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:r.getActiveUniformBlockParameter(e,o,r.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};c.used=c.usedByVertexSahder||c.usedByFragmentShader,u[f]=c}return{blockSpecs:u,uniformData:n}}var U=/\[\d+\]\.$/;function I(r,e,a,o){var i=a.blockSpecs,u=a.uniformData,s=i[o];if(!s)return t("no uniform block object named:",o),{name:o,uniforms:{}};var f=new ArrayBuffer(s.size),c=r.createBuffer(),l=s.index;r.bindBuffer(r.UNIFORM_BUFFER,c),r.uniformBlockBinding(e,s.index,l);var b=o+".";U.test(b)&&(b=b.replace(U,"."));var p={};return s.uniformIndices.forEach(function(r){var e=u[r],t=n[e.type],a=t.Type,o=e.size*t.size,i=e.name;i.substr(0,b.length)===b&&(i=i.substr(b.length)),p[i]=new a(f,e.offset,o/a.BYTES_PER_ELEMENT)}),{name:o,array:f,asFloat:new Float32Array(f),buffer:c,uniforms:p}}function C(r,e,t){var n=(e.uniformBlockSpec||e).blockSpecs[t.name];if(n){var a=n.index;return r.bindBufferRange(r.UNIFORM_BUFFER,a,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function S(r,e){for(var t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES),a=0;a<n;++a){var o=r.getActiveAttrib(e,a);if(!o)break;var i=r.getAttribLocation(e,o.name),u=m[o.type],s=u.setter(r,i,u);s.location=i,t[o.name]=s}return t}function M(r,e){for(var t in e){var n=r[t];n&&n(e[t])}}function z(e,t){var n={program:t,uniformSetters:F(e,t),attribSetters:S(e,t)};return r.isWebGL2(e)&&(n.uniformBlockSpec=B(e,t),n.transformFeedbackInfo=R(e,t)),n}return{createAttributeSetters:S,createProgram:T,createProgramFromScripts:function(r,e,t,n,a){for(var o=h(t,n,a),i=[],u=0;u<e.length;++u){var s=w(r,e[u],r[E[u]],o.errorCallback);if(!s)return null;i.push(s)}return T(r,i,o)},createProgramFromSources:_,createProgramInfo:function(r,e,t,n,a){var o=h(t,n,a),i=!0;if(e=e.map(function(r){if(r.indexOf("\n")<0){var e=document.getElementById(r);e?r=e.text:(o.errorCallback("no element with id: "+r),i=!1)}return r}),!i)return null;var u=_(r,e,o);return u?z(r,u):null},createProgramInfoFromProgram:z,createUniformSetters:F,createUniformBlockSpecFromProgram:B,createUniformBlockInfoFromProgram:I,createUniformBlockInfo:function(r,e,t){return I(r,e.program,e.uniformBlockSpec,t)},createTransformFeedback:function(r,e,t){var n=r.createTransformFeedback();return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n),r.useProgram(e.program),P(r,e,t),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),function(r,e,t){for(var n in e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),t.attribs&&(t=t.attribs),t){var a=e[n];a&&r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,a.index,null)}}(r,e,t),n},createTransformFeedbackInfo:R,bindTransformFeedbackInfo:P,setAttributes:M,setBuffersAndAttributes:function(r,e,t){t.vertexArrayObject?r.bindVertexArray(t.vertexArrayObject):(M(e.attribSetters||e,t.attribs),t.indices&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indices))},setUniforms:function r(e,t){for(var n=e.uniformSetters||e,a=arguments.length,o=1;o<a;++o){var i=arguments[o];if(Array.isArray(i))for(var u=i.length,s=0;s<u;++s)r(n,i[s]);else for(var f in i){var c=n[f];c&&c(i[f])}}},setUniformBlock:function(r,e,t){C(r,e,t)&&r.bufferData(r.UNIFORM_BUFFER,t.array,r.DYNAMIC_DRAW)},setBlockUniforms:function(r,e){var t=r.uniforms;for(var n in e){var a=t[n];if(a){var o=e[n];o.length?a.set(o):a[0]=o}}},bindUniformBlock:C}}.apply(e,n))||(r.exports=a)},function(r,e,t){var n,a;n=[t(8),t(4)],void 0===(a=function(r,e){"use strict";var t=36064,n=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],a={};a[34041]=33306,a[6401]=36128,a[36168]=36128,a[6402]=36096,a[33189]=36096;var o={};return o[32854]=!0,o[32855]=!0,o[36194]=!0,o[34041]=!0,o[33189]=!0,o[6401]=!0,o[36168]=!0,{bindFramebufferInfo:function(r,e,t){t=t||r.FRAMEBUFFER,e?(r.bindFramebuffer(t,e.framebuffer),r.viewport(0,0,e.width,e.height)):(r.bindFramebuffer(t,null),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight))},createFramebufferInfo:function(i,u,s,f){var c=i.FRAMEBUFFER,l=i.createFramebuffer();i.bindFramebuffer(c,l),s=s||i.drawingBufferWidth,f=f||i.drawingBufferHeight;var b=0,p={framebuffer:l,attachments:[],width:s,height:f};return(u=u||n).forEach(function(n){var u=n.attachment,l=n.format,y=function(r){return a[r]}(l);if(y||(y=t+b++),!u)if(function(r){return o[r]}(l))u=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,u),i.renderbufferStorage(i.RENDERBUFFER,l,s,f);else{var m=e.shallowCopy(n);m.width=s,m.height=f,void 0===m.auto&&(m.auto=!1,m.min=m.min||m.minMag||i.LINEAR,m.mag=m.mag||m.minMag||i.LINEAR,m.wrapS=m.wrapS||m.wrap||i.CLAMP_TO_EDGE,m.wrapT=m.wrapT||m.wrap||i.CLAMP_TO_EDGE),u=r.createTexture(i,m)}if(u instanceof WebGLRenderbuffer)i.framebufferRenderbuffer(c,y,i.RENDERBUFFER,u);else{if(!(u instanceof WebGLTexture))throw"unknown attachment type";i.framebufferTexture2D(c,y,n.texTarget||i.TEXTURE_2D,u,n.level||0)}p.attachments.push(u)}),p},resizeFramebufferInfo:function(e,t,a,o,i){o=o||e.drawingBufferWidth,i=i||e.drawingBufferHeight,t.width=o,t.height=i,(a=a||n).forEach(function(n,a){var u=t.attachments[a],s=n.format;if(u instanceof WebGLRenderbuffer)e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,s,o,i);else{if(!(u instanceof WebGLTexture))throw"unknown attachment type";r.resizeTexture(e,u,n,o,i)}})}}}.apply(e,n))||(r.exports=a)},function(r,e,t){var n,a;n=[t(3),t(4)],void 0===(a=function(r,e){"use strict";var t={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},n=r.isArrayBuffer,a=document.createElement("canvas").getContext("2d"),o=6407,i=33319,u={},s=u;s[6406]={numColorComponents:1},s[6409]={numColorComponents:1},s[6410]={numColorComponents:2},s[o]={numColorComponents:3},s[6408]={numColorComponents:4},s[6403]={numColorComponents:1},s[36244]={numColorComponents:1},s[i]={numColorComponents:2},s[33320]={numColorComponents:2},s[o]={numColorComponents:3},s[36248]={numColorComponents:3},s[6408]={numColorComponents:4},s[36249]={numColorComponents:4},s[6402]={numColorComponents:1},s[34041]={numColorComponents:2};var f={};function c(r,e){var t=f[r];if(!t)throw"unknown internal format";var n=t.bytesPerElementMap[e];if(void 0===n)throw"unknown internal format";return n}function l(r){var e=f[r];if(!e)throw"unknown internal format";return{format:e.textureFormat,type:Array.isArray(e.type)?e.type[0]:e.type}}function b(r){return 0==(r&r-1)}function p(e,t,a){return n(t)?r.getGLTypeForTypedArray(t):a||e.UNSIGNED_BYTE}function y(r,e,t,n,a){if(a%1!=0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=a/n)%1)throw"can't guess dimensions"}else if((n=a/t)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(a/(e===r.TEXTURE_CUBE_MAP?6:1));o%1==0?(t=o,n=o):(t=a,n=1)}return{width:t,height:n}}function m(r){t.textureColor=new Uint8Array([255*r[0],255*r[1],255*r[2],255*r[3]])}!function(){var r=f;r[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},r[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},r[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},r[o]={textureFormat:o,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},r[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},r[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:1,type:5121},r[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:1,type:5120},r[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},r[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:4,type:5126},r[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5121},r[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5120},r[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5123},r[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5122},r[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},r[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5124},r[33323]={textureFormat:i,colorRenderable:!0,textureFilterable:!0,bytesPerElement:2,type:5121},r[36757]={textureFormat:i,colorRenderable:!1,textureFilterable:!0,bytesPerElement:2,type:5120},r[33327]={textureFormat:i,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},r[33328]={textureFormat:i,colorRenderable:!1,textureFilterable:!1,bytesPerElement:8,type:5126},r[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5121},r[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5120},r[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5123},r[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5122},r[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5125},r[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5124},r[32849]={textureFormat:o,colorRenderable:!0,textureFilterable:!0,bytesPerElement:3,type:5121},r[35905]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5121},r[36194]={textureFormat:o,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},r[36758]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5120},r[35898]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},r[35901]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},r[34843]={textureFormat:o,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},r[34837]={textureFormat:o,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5126},r[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5121},r[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5120},r[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5123},r[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5122},r[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5125},r[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5124},r[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},r[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},r[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:4,type:5120},r[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},r[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},r[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:33640},r[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},r[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:16,type:5126},r[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5121},r[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5120},r[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:33640},r[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5123},r[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5122},r[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5124},r[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5125},r[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},r[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},r[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5126},r[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:34042},r[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:36269},Object.keys(r).forEach(function(e){var t=r[e];if(t.bytesPerElementMap={},Array.isArray(t.bytesPerElement))t.bytesPerElement.forEach(function(r,e){var n=t.type[e];t.bytesPerElementMap[n]=r});else{var n=t.type;t.bytesPerElementMap[n]=t.bytesPerElement}})}();var d=function(){var r;return function(e,t){return function(e){if(!r)for(var t in r={},e)"number"==typeof e[t]&&(r[e[t]]=t)}(e),r[t]||"0x"+t.toString(16)}}(),v={};function g(r,e){void 0!==e.colorspaceConversion&&(v.colorspaceConversion=r.getParameter(r.UNPACK_COLORSPACE_CONVERSION_WEBGL),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.colorspaceConversion)),void 0!==e.premultiplyAlpha&&(v.premultiplyAlpha=r.getParameter(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha)),void 0!==e.flipY&&(v.flipY=r.getParameter(r.UNPACK_FLIP_Y_WEBGL),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,e.flipY))}function h(r,e){void 0!==e.colorspaceConversion&&r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,v.colorspaceConversion),void 0!==e.premultiplyAlpha&&r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v.premultiplyAlpha),void 0!==e.flipY&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,v.flipY)}var E=window.WebGLSampler||function(){};function x(r,e,t,n){n.minMag&&(t.call(r,e,r.TEXTURE_MIN_FILTER,n.minMag),t.call(r,e,r.TEXTURE_MAG_FILTER,n.minMag)),n.min&&t.call(r,e,r.TEXTURE_MIN_FILTER,n.min),n.mag&&t.call(r,e,r.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(t.call(r,e,r.TEXTURE_WRAP_S,n.wrap),t.call(r,e,r.TEXTURE_WRAP_T,n.wrap),(e===r.TEXTURE_3D||e instanceof E)&&t.call(r,e,r.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&t.call(r,e,r.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&t.call(r,e,r.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&t.call(r,e,r.TEXTURE_WRAP_T,n.wrapT),n.minLod&&t.call(r,e,r.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&t.call(r,e,r.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&t.call(r,e,r.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&t.call(r,e,r.TEXTURE_MAX_LEVEL,n.maxLevel)}function A(r,e,t){var n=t.target||r.TEXTURE_2D;r.bindTexture(n,e),x(r,n,r.texParameteri,t)}function T(r,e,t){x(r,e,r.samplerParameteri,t)}function w(r,e){var t=r.createSampler();return T(r,t,e),t}function _(r,n,a,o,i,u,s){a=a||t.textureOptions,u=u||r.RGBA,s=s||r.UNSIGNED_BYTE;var c=a.target||r.TEXTURE_2D;if(o=o||a.width,i=i||a.height,r.bindTexture(c,n),function(r,t,n,a){if(!e.isWebGL2(r))return b(t)&&b(n);var o=f[a];if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}(r,o,i,u))r.generateMipmap(c);else{var l=function(r){var e=f[r];if(!e)throw"unknown internal format";return e.textureFilterable}(u)?r.LINEAR:r.NEAREST;r.texParameteri(c,r.TEXTURE_MIN_FILTER,l),r.texParameteri(c,r.TEXTURE_MAG_FILTER,l),r.texParameteri(c,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(c,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE)}}function F(r){return!0===r.auto||void 0===r.auto&&void 0===r.level}function R(r,e){return(e=e||{}).cubeFaceOrder||[r.TEXTURE_CUBE_MAP_POSITIVE_X,r.TEXTURE_CUBE_MAP_NEGATIVE_X,r.TEXTURE_CUBE_MAP_POSITIVE_Y,r.TEXTURE_CUBE_MAP_NEGATIVE_Y,r.TEXTURE_CUBE_MAP_POSITIVE_Z,r.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function P(r,e){var t=R(r,e).map(function(r,e){return{face:r,ndx:e}});return t.sort(function(r,e){return r.face-e.face}),t}function B(r,e,n,o){var i=(o=o||t.textureOptions).target||r.TEXTURE_2D,u=o.level||0,s=n.width,f=n.height,c=o.internalFormat||o.format||r.RGBA,b=l(c),p=o.format||b.format,y=o.type||b.type;if(g(r,o),r.bindTexture(i,e),i===r.TEXTURE_CUBE_MAP){var m,d,v=n.width,E=n.height;if(v/6===E)m=E,d=[0,0,1,0,2,0,3,0,4,0,5,0];else if(E/6===v)m=v,d=[0,0,0,1,0,2,0,3,0,4,0,5];else if(v/3==E/2)m=v/3,d=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(v/2!=E/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);m=v/2,d=[0,0,1,0,0,1,1,1,0,2,1,2]}a.canvas.width=m,a.canvas.height=m,s=m,f=m,P(r,o).forEach(function(e){var t=d[2*e.ndx+0]*m,o=d[2*e.ndx+1]*m;a.drawImage(n,t,o,m,m,0,0,m,m),r.texImage2D(e.face,u,c,p,y,a.canvas)}),a.canvas.width=1,a.canvas.height=1}else if(i===r.TEXTURE_3D){var x=Math.min(n.width,n.height),T=Math.max(n.width,n.height),w=T/x;if(w%1!=0)throw"can not compute 3D dimensions of element";var R=n.width===T?1:0,B=n.height===T?1:0;r.texImage3D(i,u,c,x,x,x,0,p,y,null),a.canvas.width=x,a.canvas.height=x;for(var U=0;U<w;++U){var I=U*x*R,C=U*x*B,S=x,M=x,z=x,D=x;a.drawImage(n,I,C,S,M,0,0,z,D),r.texSubImage3D(i,u,0,0,U,x,x,1,p,y,a.canvas)}a.canvas.width=0,a.canvas.height=0}else r.texImage2D(i,u,c,p,y,n);h(r,o),F(o)&&_(r,e,o,s,f,c,y),A(r,e,o)}function U(){}function I(r,n,a){a=a||U;var o=new Image;function i(){o.removeEventListener("error",u),o.removeEventListener("load",s),o=null}function u(){var t="couldn't load image: "+r;e.error(t),a(t,o),i()}function s(){a(null,o),i()}return void 0!==(n=void 0!==n?n:t.crossOrigin)&&(o.crossOrigin=n),o.addEventListener("error",u),o.addEventListener("load",s),o.src=r,o}function C(r,e,a){var o=(a=a||t.textureOptions).target||r.TEXTURE_2D;if(r.bindTexture(o,e),!1!==a.color){var i=function(r){return r=r||t.textureColor,n(r)?r:new Uint8Array([255*r[0],255*r[1],255*r[2],255*r[3]])}(a.color);if(o===r.TEXTURE_CUBE_MAP)for(var u=0;u<6;++u)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+u,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,i);else o===r.TEXTURE_3D||o===r.TEXTURE_2D_ARRAY?r.texImage3D(o,0,r.RGBA,1,1,1,0,r.RGBA,r.UNSIGNED_BYTE,i):r.texImage2D(o,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,i)}}function S(r,n,a,o){return o=o||U,a=a||t.textureOptions,C(r,n,a),I((a=e.shallowCopy(a)).src,a.crossOrigin,function(e,t){e?o(e,n,t):(B(r,n,t,a),o(null,n,t))})}function M(r,t,n,a){a=a||U;var o=n.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";var i=n.level||0,u=n.internalFormat||n.format||r.RGBA,s=l(u),f=n.format||s.format,c=n.type||r.UNSIGNED_BYTE,b=n.target||r.TEXTURE_2D;if(b!==r.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";C(r,t,n),n=e.shallowCopy(n);var p,y=6,m=[],d=R(r,n);p=o.map(function(e,o){return I(e,n.crossOrigin,function(e){return function(o,s){--y,o?m.push(o):s.width!==s.height?m.push("cubemap face img is not a square: "+s.src):(g(r,n),r.bindTexture(b,t),5===y?R(r).forEach(function(e){r.texImage2D(e,i,u,f,c,s)}):r.texImage2D(e,i,u,f,c,s),h(r,n),F(n)&&r.generateMipmap(b)),0===y&&a(m.length?m:void 0,p,t)}}(d[o]))})}function z(r,t,n,o){o=o||U;var i=n.src,u=n.internalFormat||n.format||r.RGBA,s=l(u),f=n.format||s.format,c=n.type||r.UNSIGNED_BYTE,b=n.target||r.TEXTURE_2D_ARRAY;if(b!==r.TEXTURE_3D&&b!==r.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";C(r,t,n),n=e.shallowCopy(n);var p,y=i.length,m=[],d=n.level||0,v=n.width,E=n.height,x=i.length,A=!0;p=i.map(function(e,i){return I(e,n.crossOrigin,function(e){return function(i,s){if(--y,i)m.push(i);else{if(g(r,n),r.bindTexture(b,t),A){A=!1,v=n.width||s.width,E=n.height||s.height,r.texImage3D(b,d,u,v,E,x,0,f,c,null);for(var l=0;l<x;++l)r.texSubImage3D(b,d,0,0,l,v,E,1,f,c,s)}else{var T=s;s.width===v&&s.height===E||(T=a.canvas,a.canvas.width=v,a.canvas.height=E,a.drawImage(s,0,0,v,E)),r.texSubImage3D(b,d,0,0,e,v,E,1,f,c,T),T===a.canvas&&(a.canvas.width=0,a.canvas.height=0)}h(r,n),F(n)&&r.generateMipmap(b)}0===y&&o(m.length?m:void 0,p,t)}}(i))})}function D(e,a,o,i){var u=(i=i||t.textureOptions).target||e.TEXTURE_2D;e.bindTexture(u,a);var s=i.width,f=i.height,b=i.depth,m=i.level||0,v=i.internalFormat||i.format||e.RGBA,E=l(v),x=i.format||E.format,A=i.type||p(e,o,E.type);if(n(o))o instanceof Uint8ClampedArray&&(o=new Uint8Array(o.buffer));else{var T=r.getTypedArrayTypeForGLType(A);o=new T(o)}var w,_=c(v,A),F=o.byteLength/_;if(F%1)throw"length wrong size for format: "+d(e,x);if(u===e.TEXTURE_3D)if(s||f||b)!s||f&&b?!f||s&&b?(w=y(e,u,s,f,F/b),s=w.width,f=w.height):(w=y(e,u,s,b,F/f),s=w.width,b=w.height):(w=y(e,u,f,b,F/s),f=w.width,b=w.height);else{var R=Math.cbrt(F);if(R%1!=0)throw"can't guess cube size of array of numElements: "+F;s=R,f=R,b=R}else w=y(e,u,s,f,F),s=w.width,f=w.height;return e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment||1),g(e,i),u===e.TEXTURE_CUBE_MAP?function(){var r=_/o.BYTES_PER_ELEMENT,t=F/6*r;P(e,i).forEach(function(r){var n=t*r.ndx,a=o.subarray(n,n+t);e.texImage2D(r.face,m,v,s,f,0,x,A,a)})}():u===e.TEXTURE_3D?e.texImage3D(u,m,v,s,f,b,0,x,A,o):e.texImage2D(u,m,v,s,f,0,x,A,o),h(e,i),{width:s,height:f,depth:b,type:A}}function L(r,e,t){var n=t.target||r.TEXTURE_2D;r.bindTexture(n,e);var a=t.level||0,o=t.internalFormat||t.format||r.RGBA,i=l(o),u=t.format||i.format,s=t.type||i.type;if(g(r,t),n===r.TEXTURE_CUBE_MAP)for(var f=0;f<6;++f)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+f,a,o,t.width,t.height,0,u,s,null);else n===r.TEXTURE_3D?r.texImage3D(n,a,o,t.width,t.height,t.depth,0,u,s,null):r.texImage2D(n,a,o,t.width,t.height,0,u,s,null);h(r,t)}function O(r,e,a){a=a||U,e=e||t.textureOptions;var o=r.createTexture(),i=e.target||r.TEXTURE_2D,u=e.width||1,s=e.height||1,f=e.internalFormat||r.RGBA,c=l(f),b=e.type||c.type;r.bindTexture(i,o),i===r.TEXTURE_CUBE_MAP&&(r.texParameteri(i,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(i,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE));var p=e.src;if(p)if("function"==typeof p&&(p=p(r,e)),"string"==typeof p)S(r,o,e,a);else if(n(p)||Array.isArray(p)&&("number"==typeof p[0]||Array.isArray(p[0])||n(p[0]))){var y=D(r,o,p,e);u=y.width,s=y.height,b=y.type}else if(Array.isArray(p)&&"string"==typeof p[0])i===r.TEXTURE_CUBE_MAP?M(r,o,e,a):z(r,o,e,a);else{if(!(p instanceof HTMLElement))throw"unsupported src type";B(r,o,p,e),u=p.width,s=p.height}else L(r,o,e);return F(e)&&_(r,o,e,u,s,f,b),A(r,o,e),o}return{setDefaults_:function(r){e.copyExistingProperties(r,t),r.textureColor&&m(r.textureColor)},createSampler:w,createSamplers:function(r,e){var t={};return Object.keys(e).forEach(function(n){t[n]=w(r,e[n])}),t},setSamplerParameters:T,createTexture:O,setEmptyTexture:L,setTextureFromArray:D,loadTextureFromUrl:S,setTextureFromElement:B,setTextureFilteringForSize:_,setTextureParameters:A,setDefaultTextureColor:m,createTextures:function(r,e,t){t=t||U;var n=0,a=[],o={},i={};function u(){0===n&&setTimeout(function(){t(a.length?a:void 0,o,i)},0)}return Object.keys(e).forEach(function(t){var s,f=e[t];(function(r){return"string"==typeof r||Array.isArray(r)&&"string"==typeof r[0]})(f.src)&&(s=function(r,e,o){i[t]=o,--n,r&&a.push(r),u()},++n),o[t]=O(r,f,s)}),u(),o},resizeTexture:function(r,e,t,a,o){a=a||t.width,o=o||t.height;var i=t.target||r.TEXTURE_2D;r.bindTexture(i,e);var u,s=t.level||0,f=l(t.internalFormat||t.format||r.RGBA),c=t.format||f.format,b=t.src;if(u=b&&(n(b)||Array.isArray(b)&&"number"==typeof b[0])?t.type||p(r,b,f.type):t.type||f.type,i===r.TEXTURE_CUBE_MAP)for(var y=0;y<6;++y)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+y,s,c,a,o,0,c,u,null);else r.texImage2D(i,s,c,a,o,0,c,u,null)},getNumComponentsForFormat:function(r){var e=u[r];if(!e)throw"unknown format: "+r;return e.numColorComponents},getBytesPerElementForInternalFormat:c}}.apply(e,n))||(r.exports=a)},function(r,e,t){var n,a;n=[t(6)],void 0===(a=function(r){"use strict";function e(e,t,n,a){var o=e.createVertexArray();return e.bindVertexArray(o),r.setAttributes(t,n),a&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bindVertexArray(null),o}return{createVertexArrayInfo:function(e,t,n){var a=e.createVertexArray();return e.bindVertexArray(a),t.length||(t=[t]),t.forEach(function(t){r.setBuffersAndAttributes(e,t,n)}),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:a}},createVAOAndSetAttributes:e,createVAOFromBufferInfo:function(r,t,n){return e(r,t.attribSetters||t,n.attribs,n.indices)}}}.apply(e,n))||(r.exports=a)},function(r,e,t){var n,a;n=[t(11)],void 0===(a=function(r){"use strict";var e=Float32Array,t=r.create(),n=r.create(),a=r.create();function o(r,t){return(t=t||new e(16))[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function i(r){return(r=r||new e(16))[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function u(r,t){t=t||new e(16);var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],f=r[6],c=r[7],l=r[8],b=r[9],p=r[10],y=r[11],m=r[12],d=r[13],v=r[14],g=r[15],h=p*g,E=v*y,x=f*g,A=v*c,T=f*y,w=p*c,_=o*g,F=v*i,R=o*y,P=p*i,B=o*c,U=f*i,I=l*d,C=m*b,S=u*d,M=m*s,z=u*b,D=l*s,L=n*d,O=m*a,N=n*b,k=l*a,G=n*s,X=u*a,V=h*s+A*b+T*d-(E*s+x*b+w*d),Y=E*a+_*b+P*d-(h*a+F*b+R*d),W=x*a+F*s+B*d-(A*a+_*s+U*d),j=w*a+R*s+U*b-(T*a+P*s+B*b),H=1/(n*V+u*Y+l*W+m*j);return t[0]=H*V,t[1]=H*Y,t[2]=H*W,t[3]=H*j,t[4]=H*(E*u+x*l+w*m-(h*u+A*l+T*m)),t[5]=H*(h*n+F*l+R*m-(E*n+_*l+P*m)),t[6]=H*(A*n+_*u+U*m-(x*n+F*u+B*m)),t[7]=H*(T*n+P*u+B*l-(w*n+R*u+U*l)),t[8]=H*(I*c+M*y+z*g-(C*c+S*y+D*g)),t[9]=H*(C*i+L*y+k*g-(I*i+O*y+N*g)),t[10]=H*(S*i+O*c+G*g-(M*i+L*c+X*g)),t[11]=H*(D*i+N*c+X*y-(z*i+k*c+G*y)),t[12]=H*(S*p+D*v+C*f-(z*v+I*f+M*p)),t[13]=H*(N*v+I*o+O*p-(L*p+k*v+C*o)),t[14]=H*(L*f+X*v+M*o-(G*v+S*o+O*f)),t[15]=H*(G*p+z*o+k*f-(N*f+X*p+D*o)),t}function s(r,t,n,a){a=a||new e(16);var o=t[0],i=t[1],u=t[2],s=Math.sqrt(o*o+i*i+u*u),f=(o/=s)*o,c=(i/=s)*i,l=(u/=s)*u,b=Math.cos(n),p=Math.sin(n),y=1-b,m=f+(1-f)*b,d=o*i*y+u*p,v=o*u*y-i*p,g=o*i*y-u*p,h=c+(1-c)*b,E=i*u*y+o*p,x=o*u*y+i*p,A=i*u*y-o*p,T=l+(1-l)*b,w=r[0],_=r[1],F=r[2],R=r[3],P=r[4],B=r[5],U=r[6],I=r[7],C=r[8],S=r[9],M=r[10],z=r[11];return a[0]=m*w+d*P+v*C,a[1]=m*_+d*B+v*S,a[2]=m*F+d*U+v*M,a[3]=m*R+d*I+v*z,a[4]=g*w+h*P+E*C,a[5]=g*_+h*B+E*S,a[6]=g*F+h*U+E*M,a[7]=g*R+h*I+E*z,a[8]=x*w+A*P+T*C,a[9]=x*_+A*B+T*S,a[10]=x*F+A*U+T*M,a[11]=x*R+A*I+T*z,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a}return{axisRotate:s,axisRotation:function(r,t,n){n=n||new e(16);var a=r[0],o=r[1],i=r[2],u=Math.sqrt(a*a+o*o+i*i),s=(a/=u)*a,f=(o/=u)*o,c=(i/=u)*i,l=Math.cos(t),b=Math.sin(t),p=1-l;return n[0]=s+(1-s)*l,n[1]=a*o*p+i*b,n[2]=a*i*p-o*b,n[3]=0,n[4]=a*o*p-i*b,n[5]=f+(1-f)*l,n[6]=o*i*p+a*b,n[7]=0,n[8]=a*i*p+o*b,n[9]=o*i*p-a*b,n[10]=c+(1-c)*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},create:i,copy:o,frustum:function(r,t,n,a,o,i,u){var s=t-r,f=a-n,c=o-i;return(u=u||new e(16))[0]=2*o/s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*o/f,u[6]=0,u[7]=0,u[8]=(r+t)/s,u[9]=(a+n)/f,u[10]=i/c,u[11]=-1,u[12]=0,u[13]=0,u[14]=o*i/c,u[15]=0,u},getAxis:function(e,t,n){var a=4*t;return(n=n||r.create())[0]=e[a+0],n[1]=e[a+1],n[2]=e[a+2],n},getTranslation:function(e,t){return(t=t||r.create())[0]=e[12],t[1]=e[13],t[2]=e[14],t},identity:i,inverse:u,lookAt:function(o,i,u,s){s=s||new e(16);var f=t,c=n,l=a;return r.normalize(r.subtract(o,i,l),l),r.normalize(r.cross(u,l,f),f),r.normalize(r.cross(l,f,c),c),s[0]=f[0],s[1]=f[1],s[2]=f[2],s[3]=0,s[4]=c[0],s[5]=c[1],s[6]=c[2],s[7]=0,s[8]=l[0],s[9]=l[1],s[10]=l[2],s[11]=0,s[12]=o[0],s[13]=o[1],s[14]=o[2],s[15]=1,s},multiply:function(r,t,n){n=n||new e(16);var a=r[0],o=r[1],i=r[2],u=r[3],s=r[4],f=r[5],c=r[6],l=r[7],b=r[8],p=r[9],y=r[10],m=r[11],d=r[12],v=r[13],g=r[14],h=r[15],E=t[0],x=t[1],A=t[2],T=t[3],w=t[4],_=t[5],F=t[6],R=t[7],P=t[8],B=t[9],U=t[10],I=t[11],C=t[12],S=t[13],M=t[14],z=t[15];return n[0]=a*E+s*x+b*A+d*T,n[1]=o*E+f*x+p*A+v*T,n[2]=i*E+c*x+y*A+g*T,n[3]=u*E+l*x+m*A+h*T,n[4]=a*w+s*_+b*F+d*R,n[5]=o*w+f*_+p*F+v*R,n[6]=i*w+c*_+y*F+g*R,n[7]=u*w+l*_+m*F+h*R,n[8]=a*P+s*B+b*U+d*I,n[9]=o*P+f*B+p*U+v*I,n[10]=i*P+c*B+y*U+g*I,n[11]=u*P+l*B+m*U+h*I,n[12]=a*C+s*S+b*M+d*z,n[13]=o*C+f*S+p*M+v*z,n[14]=i*C+c*S+y*M+g*z,n[15]=u*C+l*S+m*M+h*z,n},negate:function(r,t){return(t=t||new e(16))[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=-r[7],t[8]=-r[8],t[9]=-r[9],t[10]=-r[10],t[11]=-r[11],t[12]=-r[12],t[13]=-r[13],t[14]=-r[14],t[15]=-r[15],t},ortho:function(r,t,n,a,o,i,u){return(u=u||new e(16))[0]=2/(t-r),u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2/(a-n),u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=-1/(i-o),u[11]=0,u[12]=(t+r)/(r-t),u[13]=(a+n)/(n-a),u[14]=-o/(o-i),u[15]=1,u},perspective:function(r,t,n,a,o){o=o||new e(16);var i=Math.tan(.5*Math.PI-.5*r),u=1/(n-a);return o[0]=i/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+a)*u,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*a*u*2,o[15]=0,o},rotateX:function(r,t,n){n=n||new e(16);var a=r[4],o=r[5],i=r[6],u=r[7],s=r[8],f=r[9],c=r[10],l=r[11],b=Math.cos(t),p=Math.sin(t);return n[4]=b*a+p*s,n[5]=b*o+p*f,n[6]=b*i+p*c,n[7]=b*u+p*l,n[8]=b*s-p*a,n[9]=b*f-p*o,n[10]=b*c-p*i,n[11]=b*l-p*u,r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n},rotateY:function(r,t,n){n=n||new e(16);var a=r[0],o=r[1],i=r[2],u=r[3],s=r[8],f=r[9],c=r[10],l=r[11],b=Math.cos(t),p=Math.sin(t);return n[0]=b*a-p*s,n[1]=b*o-p*f,n[2]=b*i-p*c,n[3]=b*u-p*l,n[8]=b*s+p*a,n[9]=b*f+p*o,n[10]=b*c+p*i,n[11]=b*l+p*u,r!==n&&(n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n},rotateZ:function(r,t,n){n=n||new e(16);var a=r[0],o=r[1],i=r[2],u=r[3],s=r[4],f=r[5],c=r[6],l=r[7],b=Math.cos(t),p=Math.sin(t);return n[0]=b*a+p*s,n[1]=b*o+p*f,n[2]=b*i+p*c,n[3]=b*u+p*l,n[4]=b*s-p*a,n[5]=b*f-p*o,n[6]=b*c-p*i,n[7]=b*l-p*u,r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n},rotateAxis:s,rotationX:function(r,t){t=t||new e(16);var n=Math.cos(r),a=Math.sin(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationY:function(r,t){t=t||new e(16);var n=Math.cos(r),a=Math.sin(r);return t[0]=n,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationZ:function(r,t){t=t||new e(16);var n=Math.cos(r),a=Math.sin(r);return t[0]=n,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},scale:function(r,t,n){n=n||new e(16);var a=t[0],o=t[1],i=t[2];return n[0]=a*r[0],n[1]=a*r[1],n[2]=a*r[2],n[3]=a*r[3],n[4]=o*r[4],n[5]=o*r[5],n[6]=o*r[6],n[7]=o*r[7],n[8]=i*r[8],n[9]=i*r[9],n[10]=i*r[10],n[11]=i*r[11],r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n},scaling:function(r,t){return(t=t||new e(16))[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},setAxis:function(r,e,t,n){n!==r&&(n=o(r,n));var a=4*t;return n[a+0]=e[0],n[a+1]=e[1],n[a+2]=e[2],n},setDefaultType:function(r){var t=e;return e=r,t},setTranslation:function(r,e,t){return r!==(t=t||i())&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11]),t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},transformDirection:function(e,t,n){n=n||r.create();var a=t[0],o=t[1],i=t[2];return n[0]=a*e[0]+o*e[4]+i*e[8],n[1]=a*e[1]+o*e[5]+i*e[9],n[2]=a*e[2]+o*e[6]+i*e[10],n},transformNormal:function(e,t,n){n=n||r.create();var a=u(e),o=t[0],i=t[1],s=t[2];return n[0]=o*a[0]+i*a[1]+s*a[2],n[1]=o*a[4]+i*a[5]+s*a[6],n[2]=o*a[8]+i*a[9]+s*a[10],n},transformPoint:function(e,t,n){n=n||r.create();var a=t[0],o=t[1],i=t[2],u=a*e[3]+o*e[7]+i*e[11]+e[15];return n[0]=(a*e[0]+o*e[4]+i*e[8]+e[12])/u,n[1]=(a*e[1]+o*e[5]+i*e[9]+e[13])/u,n[2]=(a*e[2]+o*e[6]+i*e[10]+e[14])/u,n},translate:function(r,t,n){n=n||new e(16);var a=t[0],o=t[1],i=t[2],u=r[0],s=r[1],f=r[2],c=r[3],l=r[4],b=r[5],p=r[6],y=r[7],m=r[8],d=r[9],v=r[10],g=r[11],h=r[12],E=r[13],x=r[14],A=r[15];return r!==n&&(n[0]=u,n[1]=s,n[2]=f,n[3]=c,n[4]=l,n[5]=b,n[6]=p,n[7]=y,n[8]=m,n[9]=d,n[10]=v,n[11]=g),n[12]=u*a+l*o+m*i+h,n[13]=s*a+b*o+d*i+E,n[14]=f*a+p*o+v*i+x,n[15]=c*a+y*o+g*i+A,n},translation:function(r,t){return(t=t||new e(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},transpose:function(r,t){var n;if((t=t||new e(16))===r)return n=r[1],r[1]=r[4],r[4]=n,n=r[2],r[2]=r[8],r[8]=n,n=r[3],r[3]=r[12],r[12]=n,n=r[6],r[6]=r[9],r[9]=n,n=r[7],r[7]=r[13],r[13]=n,n=r[11],r[11]=r[14],r[14]=n,t;var a=r[0],o=r[1],i=r[2],u=r[3],s=r[4],f=r[5],c=r[6],l=r[7],b=r[8],p=r[9],y=r[10],m=r[11],d=r[12],v=r[13],g=r[14],h=r[15];return t[0]=a,t[1]=s,t[2]=b,t[3]=d,t[4]=o,t[5]=f,t[6]=p,t[7]=v,t[8]=i,t[9]=c,t[10]=y,t[11]=g,t[12]=u,t[13]=l,t[14]=m,t[15]=h,t}}}.apply(e,n))||(r.exports=a)},function(r,e,t){var n;void 0===(n=function(){"use strict";var r=Float32Array;return{add:function(e,t,n){return(n=n||new r(3))[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n},copy:function(e,t){return(t=t||new r(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},create:function(e,t,n){var a=new r(3);return e&&(a[0]=e),t&&(a[1]=t),n&&(a[2]=n),a},cross:function(e,t,n){n=n||new r(3);var a=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return n[0]=e[1]*t[2]-e[2]*t[1],n[1]=a,n[2]=o,n},distance:function(r,e){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2];return Math.sqrt(t*t+n*n+a*a)},distanceSq:function(r,e){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2];return t*t+n*n+a*a},divide:function(e,t,n){return(n=n||new r(3))[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n},divScalar:function(e,t,n){return(n=n||new r(3))[0]=e[0]/t,n[1]=e[1]/t,n[2]=e[2]/t,n},dot:function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]},lerp:function(e,t,n,a){return(a=a||new r(3))[0]=(1-n)*e[0]+n*t[0],a[1]=(1-n)*e[1]+n*t[1],a[2]=(1-n)*e[2]+n*t[2],a},length:function(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2])},lengthSq:function(r){return r[0]*r[0]+r[1]*r[1]+r[2]*r[2]},mulScalar:function(e,t,n){return(n=n||new r(3))[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n},multiply:function(e,t,n){return(n=n||new r(3))[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n},negate:function(e,t){return(t=t||new r(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},normalize:function(e,t){t=t||new r(3);var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=Math.sqrt(n);return a>1e-5?(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a):(t[0]=0,t[1]=0,t[2]=0),t},setDefaultType:function(e){var t=r;return r=e,t},subtract:function(e,t,n){return(n=n||new r(3))[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}}}.apply(e,[]))||(r.exports=n)},function(r,e,t){var n,a;n=[t(2),t(4),t(10),t(11)],void 0===(a=function(r,e,t,n){"use strict";var a=r.getArray_,o=r.getNumComponents_;function i(r,e){var t=0;return r.push=function(){for(var e=0;e<arguments.length;++e){var n=arguments[e];if(n instanceof Array||n.buffer&&n.buffer instanceof ArrayBuffer)for(var a=0;a<n.length;++a)r[t++]=n[a];else r[t++]=n}},r.reset=function(r){t=r||0},r.numComponents=e,Object.defineProperty(r,"numElements",{get:function(){return this.length/this.numComponents|0}}),r}function u(r,e,t){return i(new(t||Float32Array)(r*e),r)}function s(r){return"indices"!==r}function f(r,e,t){for(var n=r.length,a=new Float32Array(3),o=0;o<n;o+=3)t(e,[r[o],r[o+1],r[o+2]],a),r[o]=a[0],r[o+1]=a[1],r[o+2]=a[2]}function c(r,e,t){t=t||n.create();var a=e[0],o=e[1],i=e[2];return t[0]=a*r[0]+o*r[1]+i*r[2],t[1]=a*r[4]+o*r[5]+i*r[6],t[2]=a*r[8]+o*r[9]+i*r[10],t}function l(r,e){return f(r,e,t.transformDirection),r}function b(r,e){return f(r,t.inverse(e),c),r}function p(r,e){return f(r,e,t.transformPoint),r}function y(r,e){return Object.keys(r).forEach(function(t){var n=r[t];t.indexOf("pos")>=0?p(n,e):t.indexOf("tan")>=0||t.indexOf("binorm")>=0?l(n,e):t.indexOf("norm")>=0&&b(n,e)}),r}function m(r,e,t){return r=r||2,{position:{numComponents:2,data:[(e=e||0)+-1*(r*=.5),(t=t||0)+-1*r,e+1*r,t+-1*r,e+-1*r,t+1*r,e+1*r,t+1*r]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function d(r,e,n,a,o){r=r||1,e=e||1,n=n||1,a=a||1,o=o||t.identity();for(var i=(n+1)*(a+1),s=u(3,i),f=u(3,i),c=u(2,i),l=0;l<=a;l++)for(var b=0;b<=n;b++){var p=b/n,m=l/a;s.push(r*p-.5*r,0,e*m-.5*e),f.push(0,1,0),c.push(p,m)}var d=n+1,v=u(3,n*a*2,Uint16Array);for(l=0;l<a;l++)for(b=0;b<n;b++)v.push((l+0)*d+b,(l+1)*d+b,(l+0)*d+b+1),v.push((l+1)*d+b,(l+1)*d+b+1,(l+0)*d+b+1);return y({position:s,normal:f,texcoord:c,indices:v},o)}function v(r,e,t,n,a,o,i){if(e<=0||t<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,a=a||Math.PI,o=o||0;for(var s=a-n,f=(i=i||2*Math.PI)-o,c=(e+1)*(t+1),l=u(3,c),b=u(3,c),p=u(2,c),y=0;y<=t;y++)for(var m=0;m<=e;m++){var d=m/e,v=y/t,g=f*d,h=s*v,E=Math.sin(g),x=Math.cos(g),A=Math.sin(h),T=x*A,w=Math.cos(h),_=E*A;l.push(r*T,r*w,r*_),b.push(T,w,_),p.push(1-d,v)}var F=e+1,R=u(3,e*t*2,Uint16Array);for(m=0;m<e;m++)for(y=0;y<t;y++)R.push((y+0)*F+m,(y+0)*F+m+1,(y+1)*F+m),R.push((y+1)*F+m,(y+0)*F+m+1,(y+1)*F+m+1);return{position:l,normal:b,texcoord:p,indices:R}}var g=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function h(r){for(var e=(r=r||1)/2,t=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],a=[[1,0],[0,0],[0,1],[1,1]],o=u(3,24),i=u(3,24),s=u(2,24),f=u(3,12,Uint16Array),c=0;c<6;++c){for(var l=g[c],b=0;b<4;++b){var p=t[l[b]],y=n[c],m=a[b];o.push(p),i.push(y),s.push(m)}var d=4*c;f.push(d+0,d+1,d+2),f.push(d+0,d+2,d+3)}return{position:o,normal:i,texcoord:s,indices:f}}function E(r,e,t,n,a,o,i){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(a<1)throw Error("verticalSubdivisions must be 1 or greater");for(var s=void 0===o||o,f=void 0===i||i,c=(s?2:0)+(f?2:0),l=(n+1)*(a+1+c),b=u(3,l),p=u(3,l),y=u(2,l),m=u(3,n*(a+c)*2,Uint16Array),d=n+1,v=Math.atan2(r-e,t),g=Math.cos(v),h=Math.sin(v),E=a+(f?2:0),x=s?-2:0;x<=E;++x){var A,T=x/a,w=t*T;x<0?(w=0,T=1,A=r):x>a?(w=t,T=1,A=e):A=r+x/a*(e-r),-2!==x&&x!==a+2||(A=0,T=0),w-=t/2;for(var _=0;_<d;++_){var F=Math.sin(_*Math.PI*2/n),R=Math.cos(_*Math.PI*2/n);b.push(F*A,w,R*A),p.push(x<0||x>a?0:F*g,x<0?-1:x>a?1:h,x<0||x>a?0:R*g),y.push(_/n,1-T)}}for(x=0;x<a+c;++x)for(_=0;_<n;++_)m.push(d*(x+0)+0+_,d*(x+0)+1+_,d*(x+1)+1+_),m.push(d*(x+0)+0+_,d*(x+1)+1+_,d*(x+1)+0+_);return{position:b,normal:p,texcoord:y,indices:m}}function x(r,e){e=e||[];for(var t=[],n=0;n<r.length;n+=4){var a=r[n],o=r.slice(n+1,n+4);o.push.apply(o,e);for(var i=0;i<a;++i)t.push.apply(t,o)}return t}function A(){var r=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=x([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),t=x([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=r.length/3,a={position:u(3,n),texcoord:u(2,n),normal:u(3,n),color:u(4,n,Uint8Array),indices:u(3,n/3,Uint16Array)};a.position.push(r),a.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),a.normal.push(e),a.color.push(t);for(var o=0;o<n;++o)a.indices.push(o);return a}function T(r,e,t,a,o,i,s){if(o<=0)throw Error("subdivisionDown must be > 0");i=i||0;var f=2,c=(s=s||1)-i,l=2*(o+1)*(2+f),b=u(3,l),p=u(3,l),y=u(2,l);function m(r,e,t){return r+(e-r)*t}function d(e,t,u,s,l,d){for(var v=0;v<=o;v++){var g=t/(f-1),h=v/o,E=2*(g-.5),x=(i+h*c)*Math.PI,A=Math.sin(x),T=Math.cos(x),w=m(r,e,A),_=E*a,F=T*r,R=A*w;b.push(_,F,R);var P=n.add(n.multiply([0,A,T],u),s);p.push(P),y.push(g*l+d,h)}}for(var v=0;v<f;v++){var g=2*(v/(f-1)-.5);d(e,v,[1,1,1],[0,0,0],1,0),d(e,v,[0,0,0],[g,0,0],0,0),d(t,v,[1,1,1],[0,0,0],1,0),d(t,v,[0,0,0],[g,0,0],0,1)}var h=u(3,2*o*(2+f),Uint16Array);function E(r,e){for(var t=0;t<o;++t)h.push(r+t+0,r+t+1,e+t+0),h.push(r+t+1,e+t+1,e+t+0)}var x=o+1;return E(0*x,4*x),E(5*x,7*x),E(6*x,2*x),E(3*x,1*x),{position:b,normal:p,texcoord:y,indices:h}}function w(r,e,t,n,a,o){return E(r,r,e,t,n,a,o)}function _(r,e,t,n,a,o){if(t<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");a=a||0;for(var i=(o=o||2*Math.PI)-a,s=t+1,f=n+1,c=s*f,l=u(3,c),b=u(3,c),p=u(2,c),y=u(3,t*n*2,Uint16Array),m=0;m<f;++m)for(var d=m/n,v=d*Math.PI*2,g=Math.sin(v),h=r+g*e,E=Math.cos(v),x=E*e,A=0;A<s;++A){var T=A/t,w=a+T*i,_=Math.sin(w),F=Math.cos(w),R=_*h,P=F*h,B=_*g,U=F*g;l.push(R,x,P),b.push(B,E,U),p.push(T,1-d)}for(m=0;m<n;++m)for(A=0;A<t;++A){var I=1+A,C=1+m;y.push(s*m+A,s*C+A,s*m+I),y.push(s*C+A,s*C+I,s*m+I)}return{position:l,normal:b,texcoord:p,indices:y}}function F(r,e,t,n,a){if(e<3)throw Error("divisions must be at least 3");t=t||1,a=a||1,n=n||0;for(var o=(e+1)*(t+1),i=u(3,o),s=u(3,o),f=u(2,o),c=u(3,t*e*2,Uint16Array),l=0,b=r-n,p=e+1,y=0;y<=t;++y){for(var m=n+b*Math.pow(y/t,a),d=0;d<=e;++d){var v=2*Math.PI*d/e,g=m*Math.cos(v),h=m*Math.sin(v);if(i.push(g,0,h),s.push(0,1,0),f.push(1-d/e,y/t),y>0&&d!==e){var E=l+(d+1),x=l+d,A=l+d-p,T=l+(d+1)-p;c.push(E,x,A),c.push(E,A,T)}}l+=e+1}return{position:i,normal:s,texcoord:f,indices:c}}function R(e){return function(t){var n=e.apply(this,Array.prototype.slice.call(arguments,1));return r.createBuffersFromArrays(t,n)}}function P(e){return function(t){var n=e.apply(null,Array.prototype.slice.call(arguments,1));return r.createBufferInfoFromArrays(t,n)}}var B=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function U(r,e,t,n){n=n||0;for(var a=r.length,o=0;o<a;++o)e[t+o]=r[o]+n}function I(r,t){var n=a(r),o=new n.constructor(t),u=o;return n.numComponents&&n.numElements&&i(o,n.numComponents),r.data&&(u={data:o},e.copyNamedProperties(B,r,u)),u}return{create3DFBufferInfo:P(A),create3DFBuffers:R(A),create3DFVertices:A,createAugmentedTypedArray:u,createCubeBufferInfo:P(h),createCubeBuffers:R(h),createCubeVertices:h,createPlaneBufferInfo:P(d),createPlaneBuffers:R(d),createPlaneVertices:d,createSphereBufferInfo:P(v),createSphereBuffers:R(v),createSphereVertices:v,createTruncatedConeBufferInfo:P(E),createTruncatedConeBuffers:R(E),createTruncatedConeVertices:E,createXYQuadBufferInfo:P(m),createXYQuadBuffers:R(m),createXYQuadVertices:m,createCresentBufferInfo:P(T),createCresentBuffers:R(T),createCresentVertices:T,createCylinderBufferInfo:P(w),createCylinderBuffers:R(w),createCylinderVertices:w,createTorusBufferInfo:P(_),createTorusBuffers:R(_),createTorusVertices:_,createDiscBufferInfo:P(F),createDiscBuffers:R(F),createDiscVertices:F,deindexVertices:function(r){var e=r.indices,t={},n=e.length;return Object.keys(r).filter(s).forEach(function(a){for(var o=r[a],i=o.numComponents,s=u(i,n,o.constructor),f=0;f<n;++f)for(var c=e[f]*i,l=0;l<i;++l)s.push(o[c+l]);t[a]=s}),t},flattenNormals:function(r){if(r.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var e=r.normal,t=e.length,n=0;n<t;n+=9){var a=e[n+0],o=e[n+1],i=e[n+2],u=e[n+3],s=e[n+4],f=e[n+5],c=a+u+e[n+6],l=o+s+e[n+7],b=i+f+e[n+8],p=Math.sqrt(c*c+l*l+b*b);c/=p,l/=p,b/=p,e[n+0]=c,e[n+1]=l,e[n+2]=b,e[n+3]=c,e[n+4]=l,e[n+5]=b,e[n+6]=c,e[n+7]=l,e[n+8]=b}return r},makeRandomVertexColors:function(r,e){e=e||{};var t=r.position.numElements,n=u(4,t,Uint8Array),a=e.rand||function(r,e){return e<3?function(r){return Math.random()*r|0}(256):255};if(r.color=n,r.indices)for(var o=0;o<t;++o)n.push(a(o,0),a(o,1),a(o,2),a(o,3));else{var i=e.vertsPerColor||3,s=t/i;for(o=0;o<s;++o)for(var f=[a(o,0),a(o,1),a(o,2),a(o,3)],c=0;c<i;++c)n.push(f)}return r},reorientDirections:l,reorientNormals:b,reorientPositions:p,reorientVertices:y,concatVertices:function(r){for(var e,t={},n=0;n<r.length;++n){var i=r[n];Object.keys(i).forEach(function(r){t[r]||(t[r]=[]),e||"indices"===r||(e=r);var n=i[r],u=o(n,r),s=a(n).length/u;t[r].push(s)})}var u=t[e],s={};return Object.keys(t).forEach(function(e){var t=function(e){for(var t,n=0,o=0;o<r.length;++o){var i=r[o][e];n+=a(i).length,t&&!i.data||(t=i)}return{length:n,spec:t}}(e),n=I(t.spec,t.length);!function(e,t,n){for(var o=0,i=0,u=0;u<r.length;++u){var s=r[u][e],f=a(s);"indices"===e?(U(f,n,i,o),o+=t[u]):U(f,n,i),i+=f.length}}(e,u,a(n)),s[e]=n}),s},duplicateVertices:function(r){var e={};return Object.keys(r).forEach(function(t){var n=r[t],o=a(n),i=I(n,o.length);U(o,a(i),0),e[t]=i}),e}}}.apply(e,n))||(r.exports=a)}])})},"./node_modules/vox.js/build/vox.js":function(r,e,t){"use strict";(function(e){var n={};"undefined"!=typeof window?(n.global=window,n.global.vox=n):n.global=e,r.exports=n,n.VoxelData=function(){this.size=null,this.voxels=[],this.palette=[],this.anim=[{size:null,voxels:[]}]},n.Xhr=function(){},n.Xhr.prototype.getBinary=function(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){if(4===n.readyState&&(200===n.status||0===n.status)){var r=n.response;if(r){var t=new Uint8Array(r);e(t)}}},n.send(null)})},function(){n.Parser=function(){},n.Parser.prototype.parse=function(r){var e=this;return(new n.Xhr).getBinary(r).then(function(r){return new Promise(function(t,n){e.parseUint8Array(r,function(r,e){r?n(r):t(e)})})})};var r=t("./node_modules/fs/index.js");n.Parser.prototype.parseFile=function(e,t){r.readFile(e,function(r,e){if(r)return t(r);for(var n=new Uint8Array(new ArrayBuffer(e.length)),a=0,o=e.length;a<o;a++)n[a]=e[a];this.parseUint8Array(n,t)}.bind(this))},n.Parser.prototype.parseUint8Array=function(r,t){var o=new e(r);try{a(o),o.data.size=o.data.anim[0].size,o.data.voxels=o.data.anim[0].voxels,0===o.data.palette.length?(T("(use default palette)"),o.data.palette=n.defaultPalette):(o.data.palette.unshift(o.data.palette[0]),o.data.palette.pop()),t(null,o.data)}catch(r){t(r)}};var e=function(r){this.uint8Array=r,this.cursor=0,this.data=new n.VoxelData,this._arrayArray=[],this._cursorArray=[]};e.prototype.next=function(){if(this.uint8Array.byteLength<=this.cursor)throw new Error("uint8Array index out of bounds: "+this.uint8Array.byteLength);return this.uint8Array[this.cursor++]},e.prototype.hasNext=function(){return this.cursor<this.uint8Array.byteLength},e.prototype.push=function(r){for(var e=new Uint8Array(r),t=0;t<e.length;t++)e[t]=this.next();this._arrayArray.push(this.uint8Array),this._cursorArray.push(this.cursor),this.uint8Array=e,this.cursor=0},e.prototype.pop=function(){this.uint8Array=this._arrayArray.pop(),this.cursor=this._cursorArray.pop()},e.prototype.parseInt32=function(){for(var r=0,e=0;e<4;e++)r+=this.next()*Math.pow(256,e);return~~r},e.prototype.parseString=function(){for(var r=this.parseInt32(),e="",t=0;t<r;t++)e+=String.fromCharCode(this.next());return e},e.prototype.parseDict=function(){for(var r=this.parseInt32(),e={},t=0;t<r;t++){var n=this.parseString(),a=this.parseString();e[n]=a}return e},e.prototype.parseRotation=function(){this.next()};var a=function(r){o(r),i(r),u(r)},o=function(r){for(var e="",t=0;t<4;t++)e+=String.fromCharCode(r.next());if("VOX "!==e)throw new Error("invalid magic number '"+e+"'")},i=function(r){var e=r.parseInt32();console.info(".vox format version "+e)},u=function(r){if(!r.hasNext())return!1;var e=s(r),t=f(r);for(c(r),l(e,t,r);u(r););return r.hasNext()},s=function(r){for(var e="",t=0;t<4;t++)e+=String.fromCharCode(r.next());return T("chunk id = "+e),e},f=function(r){return r.parseInt32()},c=function(r){r.parseInt32()},l=function(r,e,t){switch(t.push(e),r){case"PACK":b(t);break;case"SIZE":p(t);break;case"XYZI":y(t);break;case"RGBA":m(t);break;case"MATT":d(t);break;case"nTRN":v(t);break;case"nGRP":g(t);break;case"nSHP":h(t);break;case"MATL":E(t);break;default:x(t)}t.pop()},b=function(r){var e=r.parseInt32();T("  num of SIZE and XYZI chunks = "+e)},p=function(r){var e=r.parseInt32(),t=r.parseInt32(),n=r.parseInt32();T("  bounding box size = "+e+", "+t+", "+n);var a=r.data.anim[r.data.anim.length-1];a.size&&(a={size:null,voxels:[]},r.data.anim.push(a)),a.size={x:e,y:t,z:n}},y=function(r){var e=r.parseInt32();T("  voxel size = "+e);var t=r.data.anim[r.data.anim.length-1];t.voxels.length&&(t={size:null,voxels:[]},r.data.anim.push(t));for(var n=0;n<e;n++)t.voxels.push({x:r.next(),y:r.next(),z:r.next(),colorIndex:r.next()})},m=function(r){T("  palette");for(var e=0;e<256;e++){var t={r:r.next(),g:r.next(),b:r.next(),a:r.next()};r.data.palette.push(t)}},d=function(r){T("  material");var e=r.parseInt32();T("    id = "+e);var t=r.parseInt32();T("    type = "+t+" (0:diffuse 1:metal 2:glass 3:emissive)");var n=r.parseInt32();T("    weight = "+A(n));var a=r.parseInt32();T("    property bits = "+a.toString(2));var o=!!(1&a),i=!!(2&a),u=!!(4&a),s=!!(8&a),f=!!(16&a),c=!!(32&a),l=!!(64&a),b=!!(128&a);T("      Plastic = "+o),T("      Roughness = "+i),T("      Specular = "+u),T("      IOR = "+s),T("      Attenuation = "+f),T("      Power = "+c),T("      Glow = "+l),T("      isTotalPower = "+b);var p=0;o&&(p+=1),i&&(p+=1),u&&(p+=1),s&&(p+=1),f&&(p+=1),c&&(p+=1),l&&(p+=1);for(var y=[],m=0;m<p;m++)y[m]=r.parseInt32(),T("    normalized property value = "+A(y[m]))},v=function(r){for(var e=r.parseInt32(),t=r.parseDict(),n=r.parseInt32(),a=r.parseInt32(),o=r.parseInt32(),i=r.parseInt32(),u=[],s=0;s<i;s++)u[s]=r.parseDict();T("  nodeId = "+e),T("  nodeAttributes",t),T("  childNodeId = "+n),T("  reservedId = "+a),T("  layerId = "+o),T("  numOfFrames = "+i),T("  frameAttributes",u)},g=function(r){for(var e=r.parseInt32(),t=r.parseDict(),n=r.parseInt32(),a=[],o=0;o<n;o++)a[o]=r.parseInt32();T("  nodeId = "+e),T("  nodeAttributes",t),T("  numOfChildren = "+n),T("  childNodeIds",a)},h=function(r){for(var e=r.parseInt32(),t=r.parseDict(),n=r.parseInt32(),a=[],o=[],i=0;i<n;i++)a[i]=r.parseInt32(),o[i]=r.parseDict();T("  nodeId = "+e),T("  nodeAttributes",t),T("  numOfModels = "+n),T("  modelIds",a),T("  modelAttributes",o)},E=function(r){var e=r.parseInt32(),t=r.parseDict();T("  materialId = "+e),T("  properties",t)},x=function(r){},A=function(r){for(var e=r.toString(2);e.length<32;)e="0"+e;var t="0"==e[0]?1:-1,n=Number.parseInt(e.substring(1,9),2)-127,a=Number.parseFloat("1."+Number.parseInt(e.substring(9),2));return t*Math.pow(2,n)*a},T=function(r,e){}}(),function(){n.MeshBuilder=function(r,e){null===n.MeshBuilder.textureFactory&&(n.MeshBuilder.textureFactory=new n.TextureFactory),e=e||{},this.voxelData=r,this.voxelSize=e.voxelSize||n.MeshBuilder.DEFAULT_PARAM.voxelSize,this.vertexColor=void 0===e.vertexColor?n.MeshBuilder.DEFAULT_PARAM.vertexColor:e.vertexColor,this.optimizeFaces=void 0===e.optimizeFaces?n.MeshBuilder.DEFAULT_PARAM.optimizeFaces:e.optimizeFaces,this.originToBottom=void 0===e.originToBottom?n.MeshBuilder.DEFAULT_PARAM.originToBottom:e.originToBottom,this.geometry=null,this.material=null,this.build()},n.MeshBuilder.DEFAULT_PARAM={voxelSize:1,vertexColor:!1,optimizeFaces:!0,originToBottom:!0},n.MeshBuilder.prototype.build=function(){this.geometry=new THREE.Geometry,this.material=new THREE.MeshPhongMaterial,this.hashTable=o(this.voxelData.voxels);var r=-.5*(this.voxelData.size.x-1),e=-.5*(this.voxelData.size.y-1),t=this.originToBottom?0:-.5*(this.voxelData.size.z-1),a=new THREE.Matrix4;this.voxelData.voxels.forEach(function(n){var o=this._createVoxGeometry(n);o&&(a.makeTranslation((n.x+r)*this.voxelSize,(n.z+t)*this.voxelSize,-(n.y+e)*this.voxelSize),this.geometry.merge(o,a))}.bind(this)),this.optimizeFaces&&this.geometry.mergeVertices(),this.geometry.computeFaceNormals(),this.vertexColor?this.material.vertexColors=THREE.FaceColors:this.material.map=n.MeshBuilder.textureFactory.getTexture(this.voxelData)},n.MeshBuilder.prototype.getTexture=function(){return n.MeshBuilder.textureFactory.getTexture(this.voxelData)},n.MeshBuilder.prototype._createVoxGeometry=function(n){var a=[];if(this.optimizeFaces&&r.forEach(function(r){this.hashTable.has(n.x+r.x,n.y+r.y,n.z+r.z)&&a.push(r.ignoreFace)}.bind(this)),6===a.length)return null;var o=e.map(function(r){return new THREE.Vector3(r.x*this.voxelSize*.5,r.y*this.voxelSize*.5,r.z*this.voxelSize*.5)}.bind(this)),i=t.map(function(r){return{faceA:new THREE.Face3(r.faceA.a,r.faceA.b,r.faceA.c),faceB:new THREE.Face3(r.faceB.a,r.faceB.b,r.faceB.c)}});if(this.vertexColor)var u=this.voxelData.palette[n.colorIndex],s=new THREE.Color(u.r/255,u.g/255,u.b/255);var f=new THREE.Geometry;f.faceVertexUvs[0]=[],i.forEach(function(r,e){if(!(a.indexOf(e)>=0)){if(this.vertexColor)r.faceA.color=s,r.faceB.color=s;else{var t=new THREE.Vector2((n.colorIndex+.5)/256,.5);f.faceVertexUvs[0].push([t,t,t],[t,t,t])}f.faces.push(r.faceA,r.faceB)}}.bind(this));var c={};f.faces.forEach(function(r){c[r.a]=!0,c[r.b]=!0,c[r.c]=!0});var l=0;return o.forEach(function(r,e){c[e]?f.vertices.push(r):(!function(r){f.faces.forEach(function(e){e.a>r&&(e.a-=1),e.b>r&&(e.b-=1),e.c>r&&(e.c-=1)})}(e-l),l+=1)}),f},n.MeshBuilder.prototype.createMesh=function(){return new THREE.Mesh(this.geometry,this.material)},n.MeshBuilder.prototype.isOuterVoxel=function(e){return r.filter(function(r){return this.hashTable.has(e.x+r.x,e.y+r.y,e.z+r.z)}.bind(this)).length<6},n.MeshBuilder.textureFactory=null;var r=[{x:-1,y:0,z:0,ignoreFace:0},{x:1,y:0,z:0,ignoreFace:1},{x:0,y:-1,z:0,ignoreFace:5},{x:0,y:1,z:0,ignoreFace:4},{x:0,y:0,z:-1,ignoreFace:2},{x:0,y:0,z:1,ignoreFace:3}],e=[{x:-1,y:1,z:-1},{x:1,y:1,z:-1},{x:-1,y:1,z:1},{x:1,y:1,z:1},{x:-1,y:-1,z:-1},{x:1,y:-1,z:-1},{x:-1,y:-1,z:1},{x:1,y:-1,z:1}],t=[{faceA:{a:6,b:2,c:0},faceB:{a:6,b:0,c:4}},{faceA:{a:5,b:1,c:3},faceB:{a:5,b:3,c:7}},{faceA:{a:5,b:7,c:6},faceB:{a:5,b:6,c:4}},{faceA:{a:2,b:3,c:1},faceB:{a:2,b:1,c:0}},{faceA:{a:4,b:0,c:1},faceB:{a:4,b:1,c:5}},{faceA:{a:7,b:3,c:2},faceB:{a:7,b:2,c:6}}],a=function(r,e,t){return"x"+r+"y"+e+"z"+t},o=function(r){var e={};return r.forEach(function(r){e[a(r.x,r.y,r.z)]=!0}),e.has=function(r,e,t){return a(r,e,t)in this},e}}(),function(){n.TextureFactory=function(){},n.TextureFactory.prototype.createCanvas=function(r){var e=document.createElement("canvas");e.width=256,e.height=1;for(var t=e.getContext("2d"),n=0,a=r.palette.length;n<a;n++){var o=r.palette[n];t.fillStyle="rgb("+o.r+","+o.g+","+o.b+")",t.fillRect(1*n,0,1,1)}return e},n.TextureFactory.prototype.getTexture=function(t){var n=t.palette,a=e(n);if(a in r)return r[a];var o=this.createCanvas(t),i=new THREE.Texture(o);return i.needsUpdate=!0,r[a]=i,i};var r={},e=function(r){for(var e="",a=0;a<256;a++){var o=r[a];e+=t(o.r),e+=t(o.g),e+=t(o.b),e+=t(o.a)}return n.md5(e)},t=function(r){var e=r.toString(16);return 1===e.length?"0"+e:e}}(),n.defaultPalette=[{r:255,g:255,b:255,a:255},{r:255,g:255,b:255,a:255},{r:255,g:255,b:204,a:255},{r:255,g:255,b:153,a:255},{r:255,g:255,b:102,a:255},{r:255,g:255,b:51,a:255},{r:255,g:255,b:0,a:255},{r:255,g:204,b:255,a:255},{r:255,g:204,b:204,a:255},{r:255,g:204,b:153,a:255},{r:255,g:204,b:102,a:255},{r:255,g:204,b:51,a:255},{r:255,g:204,b:0,a:255},{r:255,g:153,b:255,a:255},{r:255,g:153,b:204,a:255},{r:255,g:153,b:153,a:255},{r:255,g:153,b:102,a:255},{r:255,g:153,b:51,a:255},{r:255,g:153,b:0,a:255},{r:255,g:102,b:255,a:255},{r:255,g:102,b:204,a:255},{r:255,g:102,b:153,a:255},{r:255,g:102,b:102,a:255},{r:255,g:102,b:51,a:255},{r:255,g:102,b:0,a:255},{r:255,g:51,b:255,a:255},{r:255,g:51,b:204,a:255},{r:255,g:51,b:153,a:255},{r:255,g:51,b:102,a:255},{r:255,g:51,b:51,a:255},{r:255,g:51,b:0,a:255},{r:255,g:0,b:255,a:255},{r:255,g:0,b:204,a:255},{r:255,g:0,b:153,a:255},{r:255,g:0,b:102,a:255},{r:255,g:0,b:51,a:255},{r:255,g:0,b:0,a:255},{r:204,g:255,b:255,a:255},{r:204,g:255,b:204,a:255},{r:204,g:255,b:153,a:255},{r:204,g:255,b:102,a:255},{r:204,g:255,b:51,a:255},{r:204,g:255,b:0,a:255},{r:204,g:204,b:255,a:255},{r:204,g:204,b:204,a:255},{r:204,g:204,b:153,a:255},{r:204,g:204,b:102,a:255},{r:204,g:204,b:51,a:255},{r:204,g:204,b:0,a:255},{r:204,g:153,b:255,a:255},{r:204,g:153,b:204,a:255},{r:204,g:153,b:153,a:255},{r:204,g:153,b:102,a:255},{r:204,g:153,b:51,a:255},{r:204,g:153,b:0,a:255},{r:204,g:102,b:255,a:255},{r:204,g:102,b:204,a:255},{r:204,g:102,b:153,a:255},{r:204,g:102,b:102,a:255},{r:204,g:102,b:51,a:255},{r:204,g:102,b:0,a:255},{r:204,g:51,b:255,a:255},{r:204,g:51,b:204,a:255},{r:204,g:51,b:153,a:255},{r:204,g:51,b:102,a:255},{r:204,g:51,b:51,a:255},{r:204,g:51,b:0,a:255},{r:204,g:0,b:255,a:255},{r:204,g:0,b:204,a:255},{r:204,g:0,b:153,a:255},{r:204,g:0,b:102,a:255},{r:204,g:0,b:51,a:255},{r:204,g:0,b:0,a:255},{r:153,g:255,b:255,a:255},{r:153,g:255,b:204,a:255},{r:153,g:255,b:153,a:255},{r:153,g:255,b:102,a:255},{r:153,g:255,b:51,a:255},{r:153,g:255,b:0,a:255},{r:153,g:204,b:255,a:255},{r:153,g:204,b:204,a:255},{r:153,g:204,b:153,a:255},{r:153,g:204,b:102,a:255},{r:153,g:204,b:51,a:255},{r:153,g:204,b:0,a:255},{r:153,g:153,b:255,a:255},{r:153,g:153,b:204,a:255},{r:153,g:153,b:153,a:255},{r:153,g:153,b:102,a:255},{r:153,g:153,b:51,a:255},{r:153,g:153,b:0,a:255},{r:153,g:102,b:255,a:255},{r:153,g:102,b:204,a:255},{r:153,g:102,b:153,a:255},{r:153,g:102,b:102,a:255},{r:153,g:102,b:51,a:255},{r:153,g:102,b:0,a:255},{r:153,g:51,b:255,a:255},{r:153,g:51,b:204,a:255},{r:153,g:51,b:153,a:255},{r:153,g:51,b:102,a:255},{r:153,g:51,b:51,a:255},{r:153,g:51,b:0,a:255},{r:153,g:0,b:255,a:255},{r:153,g:0,b:204,a:255},{r:153,g:0,b:153,a:255},{r:153,g:0,b:102,a:255},{r:153,g:0,b:51,a:255},{r:153,g:0,b:0,a:255},{r:102,g:255,b:255,a:255},{r:102,g:255,b:204,a:255},{r:102,g:255,b:153,a:255},{r:102,g:255,b:102,a:255},{r:102,g:255,b:51,a:255},{r:102,g:255,b:0,a:255},{r:102,g:204,b:255,a:255},{r:102,g:204,b:204,a:255},{r:102,g:204,b:153,a:255},{r:102,g:204,b:102,a:255},{r:102,g:204,b:51,a:255},{r:102,g:204,b:0,a:255},{r:102,g:153,b:255,a:255},{r:102,g:153,b:204,a:255},{r:102,g:153,b:153,a:255},{r:102,g:153,b:102,a:255},{r:102,g:153,b:51,a:255},{r:102,g:153,b:0,a:255},{r:102,g:102,b:255,a:255},{r:102,g:102,b:204,a:255},{r:102,g:102,b:153,a:255},{r:102,g:102,b:102,a:255},{r:102,g:102,b:51,a:255},{r:102,g:102,b:0,a:255},{r:102,g:51,b:255,a:255},{r:102,g:51,b:204,a:255},{r:102,g:51,b:153,a:255},{r:102,g:51,b:102,a:255},{r:102,g:51,b:51,a:255},{r:102,g:51,b:0,a:255},{r:102,g:0,b:255,a:255},{r:102,g:0,b:204,a:255},{r:102,g:0,b:153,a:255},{r:102,g:0,b:102,a:255},{r:102,g:0,b:51,a:255},{r:102,g:0,b:0,a:255},{r:51,g:255,b:255,a:255},{r:51,g:255,b:204,a:255},{r:51,g:255,b:153,a:255},{r:51,g:255,b:102,a:255},{r:51,g:255,b:51,a:255},{r:51,g:255,b:0,a:255},{r:51,g:204,b:255,a:255},{r:51,g:204,b:204,a:255},{r:51,g:204,b:153,a:255},{r:51,g:204,b:102,a:255},{r:51,g:204,b:51,a:255},{r:51,g:204,b:0,a:255},{r:51,g:153,b:255,a:255},{r:51,g:153,b:204,a:255},{r:51,g:153,b:153,a:255},{r:51,g:153,b:102,a:255},{r:51,g:153,b:51,a:255},{r:51,g:153,b:0,a:255},{r:51,g:102,b:255,a:255},{r:51,g:102,b:204,a:255},{r:51,g:102,b:153,a:255},{r:51,g:102,b:102,a:255},{r:51,g:102,b:51,a:255},{r:51,g:102,b:0,a:255},{r:51,g:51,b:255,a:255},{r:51,g:51,b:204,a:255},{r:51,g:51,b:153,a:255},{r:51,g:51,b:102,a:255},{r:51,g:51,b:51,a:255},{r:51,g:51,b:0,a:255},{r:51,g:0,b:255,a:255},{r:51,g:0,b:204,a:255},{r:51,g:0,b:153,a:255},{r:51,g:0,b:102,a:255},{r:51,g:0,b:51,a:255},{r:51,g:0,b:0,a:255},{r:0,g:255,b:255,a:255},{r:0,g:255,b:204,a:255},{r:0,g:255,b:153,a:255},{r:0,g:255,b:102,a:255},{r:0,g:255,b:51,a:255},{r:0,g:255,b:0,a:255},{r:0,g:204,b:255,a:255},{r:0,g:204,b:204,a:255},{r:0,g:204,b:153,a:255},{r:0,g:204,b:102,a:255},{r:0,g:204,b:51,a:255},{r:0,g:204,b:0,a:255},{r:0,g:153,b:255,a:255},{r:0,g:153,b:204,a:255},{r:0,g:153,b:153,a:255},{r:0,g:153,b:102,a:255},{r:0,g:153,b:51,a:255},{r:0,g:153,b:0,a:255},{r:0,g:102,b:255,a:255},{r:0,g:102,b:204,a:255},{r:0,g:102,b:153,a:255},{r:0,g:102,b:102,a:255},{r:0,g:102,b:51,a:255},{r:0,g:102,b:0,a:255},{r:0,g:51,b:255,a:255},{r:0,g:51,b:204,a:255},{r:0,g:51,b:153,a:255},{r:0,g:51,b:102,a:255},{r:0,g:51,b:51,a:255},{r:0,g:51,b:0,a:255},{r:0,g:0,b:255,a:255},{r:0,g:0,b:204,a:255},{r:0,g:0,b:153,a:255},{r:0,g:0,b:102,a:255},{r:0,g:0,b:51,a:255},{r:238,g:0,b:0,a:255},{r:221,g:0,b:0,a:255},{r:187,g:0,b:0,a:255},{r:170,g:0,b:0,a:255},{r:136,g:0,b:0,a:255},{r:119,g:0,b:0,a:255},{r:85,g:0,b:0,a:255},{r:68,g:0,b:0,a:255},{r:34,g:0,b:0,a:255},{r:17,g:0,b:0,a:255},{r:0,g:238,b:0,a:255},{r:0,g:221,b:0,a:255},{r:0,g:187,b:0,a:255},{r:0,g:170,b:0,a:255},{r:0,g:136,b:0,a:255},{r:0,g:119,b:0,a:255},{r:0,g:85,b:0,a:255},{r:0,g:68,b:0,a:255},{r:0,g:34,b:0,a:255},{r:0,g:17,b:0,a:255},{r:0,g:0,b:238,a:255},{r:0,g:0,b:221,a:255},{r:0,g:0,b:187,a:255},{r:0,g:0,b:170,a:255},{r:0,g:0,b:136,a:255},{r:0,g:0,b:119,a:255},{r:0,g:0,b:85,a:255},{r:0,g:0,b:68,a:255},{r:0,g:0,b:34,a:255},{r:0,g:0,b:17,a:255},{r:238,g:238,b:238,a:255},{r:221,g:221,b:221,a:255},{r:187,g:187,b:187,a:255},{r:170,g:170,b:170,a:255},{r:136,g:136,b:136,a:255},{r:119,g:119,b:119,a:255},{r:85,g:85,b:85,a:255},{r:68,g:68,b:68,a:255},{r:34,g:34,b:34,a:255},{r:17,g:17,b:17,a:255}],function(){var r=new Array(0,3614090360,3905402710,606105819,3250441966,4118548399,1200080426,2821735955,4249261313,1770035416,2336552879,4294925233,2304563134,1804603682,4254626195,2792965006,1236535329,4129170786,3225465664,643717713,3921069994,3593408605,38016083,3634488961,3889429448,568446438,3275163606,4107603335,1163531501,2850285829,4243563512,1735328473,2368359562,4294588738,2272392833,1839030562,4259657740,2763975236,1272893353,4139469664,3200236656,681279174,3936430074,3572445317,76029189,3654602809,3873151461,530742520,3299628645,4096336452,1126891415,2878612391,4237533241,1700485571,2399980690,4293915773,2240044497,1873313359,4264355552,2734768916,1309151649,4149444226,3174756917,718787259,3951481745),e=new Array(new Array(0,7,1),new Array(1,12,2),new Array(2,17,3),new Array(3,22,4),new Array(4,7,5),new Array(5,12,6),new Array(6,17,7),new Array(7,22,8),new Array(8,7,9),new Array(9,12,10),new Array(10,17,11),new Array(11,22,12),new Array(12,7,13),new Array(13,12,14),new Array(14,17,15),new Array(15,22,16)),t=new Array(new Array(1,5,17),new Array(6,9,18),new Array(11,14,19),new Array(0,20,20),new Array(5,5,21),new Array(10,9,22),new Array(15,14,23),new Array(4,20,24),new Array(9,5,25),new Array(14,9,26),new Array(3,14,27),new Array(8,20,28),new Array(13,5,29),new Array(2,9,30),new Array(7,14,31),new Array(12,20,32)),a=new Array(new Array(5,4,33),new Array(8,11,34),new Array(11,16,35),new Array(14,23,36),new Array(1,4,37),new Array(4,11,38),new Array(7,16,39),new Array(10,23,40),new Array(13,4,41),new Array(0,11,42),new Array(3,16,43),new Array(6,23,44),new Array(9,4,45),new Array(12,11,46),new Array(15,16,47),new Array(2,23,48)),o=new Array(new Array(0,6,49),new Array(7,10,50),new Array(14,15,51),new Array(5,21,52),new Array(12,6,53),new Array(3,10,54),new Array(10,15,55),new Array(1,21,56),new Array(8,6,57),new Array(15,10,58),new Array(6,15,59),new Array(13,21,60),new Array(4,6,61),new Array(11,10,62),new Array(2,15,63),new Array(9,21,64));var i=new Array(new Array(function(r,e,t){return r&e|~r&t},e),new Array(function(r,e,t){return r&t|e&~t},t),new Array(function(r,e,t){return r^e^t},a),new Array(function(r,e,t){return e^(r|~t)},o));function u(r){return String.fromCharCode(255&r)+String.fromCharCode(r>>>8&255)+String.fromCharCode(r>>>16&255)+String.fromCharCode(r>>>24&255)}function s(r){for(;r<0;)r+=4294967296;for(;r>4294967295;)r-=4294967296;return r}function f(e,t,n,a,o){var i,u,f,c,l,b,p,y,m;i=a[0],u=a[1],f=a[2],c=a[3],l=o[0],b=o[1],p=o[2],m=n(t[u],t[f],t[c]),y=(y=s(y=t[i]+m+e[l]+r[p]))<<b|y>>>32-b,y+=t[u],t[i]=s(y)}n.md5=function(r){var e,t,n,a;for(a=function(r){var e,t,n,a,o,c,l,b,p,y,m,d,v;if(n=new Array(1732584193,4023233417,2562383102,271733878),(l=(c=63&(o=r.length))<56?56-c:120-c)>0)for(r+="",y=0;y<l-1;y++)r+="\0";for(r+=u(8*o),r+=u(0),o+=l+8,e=new Array(0,1,2,3),t=new Array(16),a=new Array(4),d=0;d<o;d+=64){for(y=0,m=d;y<16;y++,m+=4)t[y]=r.charCodeAt(m)|r.charCodeAt(m+1)<<8|r.charCodeAt(m+2)<<16|r.charCodeAt(m+3)<<24;for(y=0;y<4;y++)a[y]=n[y];for(y=0;y<4;y++)for(b=i[y][0],p=i[y][1],m=0;m<16;m++)f(t,a,b,e,p[m]),v=e[0],e[0]=e[3],e[3]=e[2],e[2]=e[1],e[1]=v;for(y=0;y<4;y++)n[y]+=a[y],n[y]=s(n[y])}return u(n[0])+u(n[1])+u(n[2])+u(n[3])}(r),t="",e=0;e<16;e++)n=a.charCodeAt(e),t+="0123456789abcdef".charAt(n>>4&15),t+="0123456789abcdef".charAt(15&n);return t}}()}).call(this,t("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(r,e){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(r){"object"==typeof window&&(t=window)}r.exports=t},"./shaders/include/shadertoy_vert.glsl":function(r,e){r.exports="#version 300 es\r\nprecision mediump float;\r\nprecision mediump sampler3D;\r\n\r\n#define attribute in\r\n#define varying out\r\n#define texture2D texture\r\n\r\nattribute vec2 position;\r\nvarying vec2 uv;\r\nvoid main () {\r\n  uv = position;\r\n  gl_Position = vec4(position*2.0-1.0, 0, 1); \r\n  \r\n}"},"./shaders/voxel_texture3d.glsl":function(r,e){r.exports="#version 300 es\r\nprecision mediump float;\r\nprecision mediump sampler3D;\r\n\r\n#define attribute in\r\n#define varying out\r\n#define texture2D texture\r\n\r\nuniform float colorScale;\r\nuniform float colorOffset;\r\nin vec2 uv;\r\nuniform vec2 iResolution;\r\nuniform float iTime;\r\n\r\nout vec4 outputColor;\r\n\r\n//vec2 iResolution = vec2(1024,1024);\r\n//float iTime = 0.;\r\n\r\n// forward declare. this is the shadertoy entry-point\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord );\r\n\r\n\r\nvoid main () {\r\n    vec4 fragColor;\r\n\r\n    mainImage( fragColor, uv * iResolution);\r\n    outputColor = fragColor; \r\n    //outputColor = vec4(texture(albedomap, vec3(uv.x, uv.y, 0.0)).rgb, 1);\r\n    //gl_FragColor = vec4(uv.x, uv.y, 0.,1.);\r\n}\r\n\r\nprecision mediump sampler3D;\r\nuniform sampler3D albedomap;\r\n\r\nfloat map( in vec3 p, out vec4 color)\r\n{\r\n    if(p.z < -1. || p.x < -1. || p.y < -1.)  \r\n        return 1.0;\r\n\r\n    if(p.z >= 1. || p.x >= 1. || p.y >= 1.)  \r\n        return 1.0;\r\n\r\n    color = texture(albedomap, (p+1.0)/2.0);\r\n    if(color.r < 0.1)\r\n    {\r\n        return 1.0;\r\n    }\r\n    else {\r\n        return -1.0;\r\n    }\r\n}\r\n\r\nvec2 rotate( in vec2 p, in float t )\r\n{\r\n\treturn p * cos( -t ) + vec2( p.y, -p.x ) * sin( -t );\r\n}   \r\n\r\nvec3 rotate( in vec3 p, in vec3 t )\r\n{\r\n    p.yz = rotate( p.yz, t.x );\r\n    p.zx = rotate( p.zx, t.y );\r\n\tp.xy = rotate( p.xy, t.z );\r\n    return p;\r\n}\r\n\r\nvec3 hsv(float h, float s, float v)\r\n{\r\n  return mix( vec3( 1.0 ), clamp( ( abs( fract(\r\n    h + vec3( 3.0, 2.0, 1.0 ) / 3.0 ) * 6.0 - 3.0 ) - 1.0 ), 0.0, 1.0 ), s ) * v;\r\n}\r\n\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\r\n{\r\n    float time = iTime ;\r\n\tvec2 p = ( 2.0 * fragCoord.xy - iResolution.xy ) / iResolution.y;\r\n    vec3 rd =normalize( vec3( p, -1.8 ) );\r\n\tvec3 ro = vec3( 0.0, 0.0, 3.0 );\r\n    vec3 rot = vec3( 1.5, 0, time * 0.2 );\r\n\tro = rotate( ro, rot );\r\n\trd = rotate( rd, rot );       \r\n    float s = 10.0;\r\n    ro *= s;\r\n  \tvec3 grid = floor( ro );\r\n\tvec3 grid_step = sign( rd );\r\n\tvec3 delta = ( -fract( ro ) + 0.5 * ( grid_step + 1.0 ) ) / rd;    \r\n\tvec3 delta_step =  1.0 / abs( rd );\r\n\tvec3 mask = vec3( 0.0 );\r\n    vec3 pos;\r\n    bool hit = false;\r\n    vec4 color_if_hit;\r\n\tfor ( int i = 0; i < 96; i++ )\r\n    {\r\n        pos = ( grid + 0.5 ) / s;\r\n\t\tif ( map( pos, color_if_hit) < 0.0 ) \r\n       \t{\r\n           \thit = true;\r\n           \tbreak;\r\n        }\r\n\t\tvec3 c = step( delta, delta.yzx );\r\n\t\tmask = c * ( 1.0 - c.zxy );\r\n\t\tgrid += grid_step * mask;\t\t\r\n\t\tdelta += delta_step * mask;\r\n\t}\r\n    vec3 col = vec3( 0.4 + 0.15 * p.y );\r\n    if ( hit )\r\n    {\r\n        col = color_if_hit.rgb; //hsv( 0.2 * length( pos ) + 0.03 * iTime, 0.6, 1.0 );        \r\n\t    float br = dot( vec3( 0.5, 0.9, 0.7 ), mask );\r\n        float depth = dot( delta - delta_step, mask );\r\n \t\tfloat fog = min( 1.0, 300.0 / depth / depth );       \r\n        vec3 uvw = fract( ro + rd * depth );\r\n        vec2 uv = vec2( dot( uvw.yzx, mask ), dot( uvw.zxy, mask ) );\r\n        uv = abs( uv - vec2( 0.5 ) );\r\n        float gr = 1.0 - 0.1 * smoothstep( 0.4, 0.5, max( uv.x, uv.y ) );\r\n        col *= br * gr;// * fog;\r\n               \r\n    }\r\n\tfragColor = vec4( col, 1.0 );\r\n}\r\n\r\n"},"./src/main.ts":function(r,e,t){"use strict";t.r(e);var n=document.getElementById("c").getContext("webgl2"),a=t("./node_modules/twgl.js/dist/3.x/twgl-full.js"),o=t("./shaders/include/shadertoy_vert.glsl"),i=t.n(o),u=t("./shaders/voxel_texture3d.glsl"),s=t.n(u),f=[i.a,s.a];console.log(f);var c=a.createProgramInfo(n,[i.a,s.a]),l=a.createBufferInfoFromArrays(n,{position:[0,0,0,1,0,0,0,1,0,0,1,0,1,0,0,1,1,0]});var b=function(r,e,t,n){return new(t||(t=Promise))(function(a,o){function i(r){try{s(n.next(r))}catch(r){o(r)}}function u(r){try{s(n.throw(r))}catch(r){o(r)}}function s(r){r.done?a(r.value):new t(function(e){e(r.value)}).then(i,u)}s((n=n.apply(r,e||[])).next())})},p=function(r,e){var t,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(r,i)}catch(r){o=[6,r],n=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},y=(new(t("./node_modules/vox.js/build/vox.js").Parser)).parse("../data/chr_bow.vox");function m(){return b(this,void 0,void 0,function(){var r,e;return p(this,function(t){switch(t.label){case 0:return[4,y];case 1:return(r=t.sent()).voxels,r.size,r.palette,e=function(r,e,t){for(var n=new Uint8Array(t.x*t.y*t.z*4),a=0;a<r.length;++a){var o=r[a],i=e[o.colorIndex],u=4*(o.x+(o.y+o.z*t.y)*t.x);n[u+0]=i.r,n[u+1]=i.g,n[u+2]=i.b,n[u+3]=i.a}return n}(r.voxels,r.palette,r.size),[2,a.createTextures(n,{color:{mag:n.NEAREST,min:n.NEAREST,src:e,width:r.size.x,height:r.size.y,depth:r.size.z,type:n.UNSIGNED_BYTE,format:n.RGBA,target:n.TEXTURE_3D}})]}})})}var d=function(r,e,t,n){return new(t||(t=Promise))(function(a,o){function i(r){try{s(n.next(r))}catch(r){o(r)}}function u(r){try{s(n.throw(r))}catch(r){o(r)}}function s(r){r.done?a(r.value):new t(function(e){e(r.value)}).then(i,u)}s((n=n.apply(r,e||[])).next())})},v=function(r,e){var t,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(r,i)}catch(r){o=[6,r],n=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},g=n;!function(){d(this,void 0,void 0,function(){function r(t){g.canvas.width=window.innerWidth,g.canvas.height=window.innerHeight,g.viewport(0,0,g.canvas.width,g.canvas.height),function(r,e,t,o){var i={iTime:.001*r,iResolution:[n.canvas.width,n.canvas.height],albedomap:e,colorScale:t,colorOffset:o};n.useProgram(c.program),a.setBuffersAndAttributes(n,c,l),a.setUniforms(c,i),a.drawBufferInfo(n,l)}(t,e.color,.0125,.5),requestAnimationFrame(r)}var e;return v(this,function(t){switch(t.label){case 0:return[4,m()];case 1:return e=t.sent(),requestAnimationFrame(r),[2]}})})}()}});
//# sourceMappingURL=bundle.js.map